module.exports=[19941,a=>{"use strict";class b extends Error{status;data;constructor(a,b,c=null){super(a),this.name="ApiError",this.status=b,this.data=c}}async function c(a,d={}){let{method:e="GET",params:f,body:g,headers:h,signal:i}=d,j=function(a,b){let c=a.startsWith("http")?a:`http://localhost:8080/api${a}`;if(!b)return c;let d=new URL(c);return Object.entries(b).forEach(([a,b])=>{null!=b&&d.searchParams.append(a,String(b))}),d.toString()}(a,f),k={"Content-Type":"application/json",...h},l={method:e,headers:k,signal:i};if(null!=g&&"GET"!==e)if(g instanceof FormData){let{"Content-Type":a,...b}=k;l.headers=k=b,l.body=g}else l.body=JSON.stringify(g);let m=await fetch(j,l),n=await m.text(),o=null;if(n)try{o=JSON.parse(n)}catch{o=n}if(!m.ok)throw new b(m.statusText||"Request failed",m.status,o);return o}function d(a,b){return c(a,{...b,method:"GET"})}function e(a,b,d){return c(a,{...d,method:"POST",body:b})}a.s(["ApiError",()=>b,"get",()=>d,"post",()=>e])},15292,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d({columns:a,data:d,searchableFields:e=[],actions:f,renderCell:g,footerTotals:h}){let[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(1),o=d;e.length>0&&(o=d.filter(a=>e.some(b=>String(a[b]).toLowerCase().includes(i.toLowerCase())))),k&&(o=[...o].sort((a,b)=>{let c=a[k.key],d=b[k.key],e=c<d?-1:+(c>d);return"asc"===k.direction?e:-e}));let p=Math.ceil(o.length/10),q=o.slice((m-1)*10,10*m),r=h?o.reduce((a,b)=>(void 0!==b.quantity&&(a.quantity+=b.quantity),void 0!==b.totalSum&&(a.totalSum+=b.totalSum),void 0!==b.amount&&(a.amount+=b.amount),void 0!==b.total&&(a.total+=b.total),void 0!==b.advance&&(a.advance+=b.advance),void 0!==b.remaining&&(a.remaining+=b.remaining),void 0!==b.cost&&(a.cost+=b.cost),void 0!==b.count&&(a.count+=b.count),a),{quantity:0,totalSum:0,amount:0,total:0,advance:0,remaining:0,cost:0,count:o.length}):null;return(0,b.jsxs)("div",{className:"space-y-4",children:[e.length>0&&(0,b.jsx)("div",{className:"flex gap-4",children:(0,b.jsx)("input",{type:"text",placeholder:"Search...",value:i,onChange:a=>{j(a.target.value),n(1)},className:"flex-1 px-4 py-2 border border-slate-200 rounded-lg text-sm text-slate-700 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-[#2563EB]"})}),(0,b.jsx)("div",{className:"overflow-x-auto rounded-2xl border border-slate-100",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-slate-50 border-b border-slate-200",children:[a.map(a=>(0,b.jsx)("th",{className:"px-6 py-3 text-left",children:a.sortable?(0,b.jsxs)("button",{onClick:()=>{var b;return b=a.key,void(l(a=>a?.key===b&&"asc"===a.direction?{key:b,direction:"desc"}:{key:b,direction:"asc"}),n(1))},className:"flex items-center gap-2 font-semibold text-slate-700 hover:text-[#2563EB] transition-colors",children:[a.label,k?.key===a.key&&(0,b.jsx)("span",{children:"asc"===k.direction?"↑":"↓"})]}):(0,b.jsx)("span",{className:"font-semibold text-slate-700",children:a.label})},a.key)),f&&(0,b.jsx)("th",{className:"px-6 py-3 text-left font-semibold text-slate-700",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:q.map((c,d)=>(0,b.jsxs)("tr",{className:"border-b border-slate-100 hover:bg-slate-50 transition-colors",children:[a.map(a=>(0,b.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:g?g(c,a):c[a.key]},a.key)),f&&(0,b.jsx)("td",{className:"px-6 py-4",children:f(c)})]},d))}),r&&(0,b.jsx)("tfoot",{children:(0,b.jsxs)("tr",{className:"bg-slate-50 border-t border-slate-200 font-semibold",children:[a.map(c=>"quantity"===c.key&&void 0!==r.quantity?(0,b.jsxs)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:[new Intl.NumberFormat("ru-RU",{maximumFractionDigits:0}).format(r.quantity)," tonna"]},c.key):"cost"===c.key&&void 0!==r.cost?(0,b.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(r.cost)},c.key):"totalSum"===c.key&&void 0!==r.totalSum?(0,b.jsxs)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:[new Intl.NumberFormat("ru-RU",{maximumFractionDigits:0}).format(r.totalSum)," so'm"]},c.key):"amount"===c.key&&void 0!==r.amount?(0,b.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(r.amount)},c.key):"total"===c.key&&void 0!==r.total?(0,b.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(r.total)},c.key):"advance"===c.key&&void 0!==r.advance?(0,b.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(r.advance)},c.key):"remaining"===c.key&&void 0!==r.remaining?(0,b.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(r.remaining)},c.key):"batchId"===c.key||"id"===c.key?(0,b.jsx)("td",{className:"px-6 py-4 text-slate-900 text-right font-semibold text-sm",children:"Jami:"},c.key):("operator"!==c.key||void 0===r.count||!(r.count>0))&&("producedAt"!==c.key&&"loggedAt"!==c.key&&"payoutDate"!==c.key&&"date"!==c.key||void 0===r.count||!(r.count>0)||a.find(a=>"operator"===a.key))&&("status"!==c.key||void 0===r.count||!(r.count>0)||a.find(a=>"operator"===a.key)||a.find(a=>"producedAt"===a.key||"loggedAt"===a.key||"payoutDate"===a.key||"date"===a.key))&&("transport"!==c.key||void 0===r.count||!(r.count>0)||a.find(a=>"operator"===a.key)||a.find(a=>"producedAt"===a.key||"loggedAt"===a.key||"payoutDate"===a.key||"date"===a.key)||a.find(a=>"status"===a.key))?(0,b.jsx)("td",{className:"px-6 py-4 text-slate-400 text-sm",children:"-"},c.key):(0,b.jsxs)("td",{className:"px-6 py-4 text-slate-900 font-semibold text-sm",children:[new Intl.NumberFormat("ru-RU",{maximumFractionDigits:0}).format(r.count)," ta"]},c.key)),f&&(0,b.jsx)("td",{className:"px-6 py-4"})]})})]})}),p>1&&(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("span",{className:"text-sm text-slate-500",children:["Page ",m," of ",p]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>n(a=>Math.max(1,a-1)),disabled:1===m,className:"px-3 py-1 border border-slate-200 rounded-full text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50",children:"Previous"}),(0,b.jsx)("button",{onClick:()=>n(a=>Math.min(p,a+1)),disabled:m===p,className:"px-3 py-1 border border-slate-200 rounded-full text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50",children:"Next"})]})]})]})}a.s(["DataTable",()=>d])},63959,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(15292),e=a.i(19941);let f=[{key:"batchId",label:"Batch ID",sortable:!0},{key:"product",label:"Mahsulot",sortable:!0},{key:"shift",label:"Smena",sortable:!0},{key:"line",label:"Press liniyasi",sortable:!0},{key:"quantity",label:"Hajm",sortable:!0},{key:"price",label:"Narxi",sortable:!0},{key:"totalSum",label:"Umumiy Summa",sortable:!0},{key:"transport",label:"Transport",sortable:!0},{key:"operator",label:"Mas'ul operator",sortable:!0},{key:"producedAt",label:"Berilgan sana",sortable:!0}],g=new Intl.NumberFormat("ru-RU",{maximumFractionDigits:0}),h=new Date,i=h.getFullYear(),j=`${i}-01-01`,k=h.toISOString().slice(0,10);function l(){let[a,h]=(0,c.useState)({dateFrom:j,dateTo:k,product:"all",shift:"all"}),[i,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let b=!1;return(async()=>{p(!0),n(null);try{let c=await (0,e.get)("/production/batches",{params:{dateFrom:a.dateFrom||void 0,dateTo:a.dateTo||void 0,product:"all"===a.product?void 0:a.product,shift:"all"===a.shift?void 0:a.shift}});if(b)return;let d=Array.isArray(c)?c:c.items??[];l(d)}catch(a){if(b)return;a instanceof e.ApiError?n(a.data&&a.data.message||a.message||"Ishlab chiqarish batchlarini yuklashda xatolik yuz berdi"):n("Ishlab chiqarish batchlarini yuklashda xatolik yuz berdi. Iltimos, qayta urinib ko'ring.")}finally{b||p(!1)}})(),()=>{b=!0}},[a.dateFrom,a.dateTo,a.product,a.shift]);let q=(0,c.useMemo)(()=>i.filter(b=>{let c,d,e,f="all"===a.product||b.product===a.product,g="all"===a.shift||b.shift===a.shift;return f&&g&&(c=new Date(b.producedAt).getTime(),d=a.dateFrom?new Date(a.dateFrom).getTime():void 0,e=a.dateTo?new Date(a.dateTo).getTime():void 0,("number"!=typeof d||c>=d)&&("number"!=typeof e||c<=e))}).map(a=>({...a,totalSum:a.quantity*a.price})),[i,a.product,a.shift,a.dateFrom,a.dateTo]);return q.reduce((a,b)=>(a.quantity+=b.quantity,a.batches+=1,a),{quantity:0,batches:0}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-[#0F172A]",children:"Chiqarilgan mahsulotlar"}),(0,b.jsx)("p",{className:"text-[#64748B] mt-1",children:"Smena va mahsulot bo'yicha real vaqt rejimidagi nazorat"})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg p-6 card-shadow space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-[#0F172A] mb-2 block",children:"Boshlanish sanasi"}),(0,b.jsx)("input",{type:"date",value:a.dateFrom,onChange:a=>h(b=>({...b,dateFrom:a.target.value})),className:"w-full px-3 py-2 border border-[#E2E8F0] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#2563EB]"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-[#0F172A] mb-2 block",children:"Tugash sanasi"}),(0,b.jsx)("input",{type:"date",value:a.dateTo,onChange:a=>h(b=>({...b,dateTo:a.target.value})),className:"w-full px-3 py-2 border border-[#E2E8F0] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#2563EB]"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-[#0F172A] mb-2 block",children:"Mahsulot turi"}),(0,b.jsxs)("select",{value:a.product,onChange:a=>h(b=>({...b,product:a.target.value})),className:"w-full sm-select",children:[(0,b.jsx)("option",{value:"all",children:"Barchasi"}),(0,b.jsx)("option",{value:"M400",children:"M400"}),(0,b.jsx)("option",{value:"M500",children:"M500"}),(0,b.jsx)("option",{value:"Sul'fatge chidamli",children:"Sul'fatge chidamli"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-[#0F172A] mb-2 block",children:"Smena"}),(0,b.jsxs)("select",{value:a.shift,onChange:a=>h(b=>({...b,shift:a.target.value})),className:"w-full sm-select",children:[(0,b.jsx)("option",{value:"all",children:"Barchasi"}),(0,b.jsx)("option",{value:"Tonggi",children:"Tonggi"}),(0,b.jsx)("option",{value:"Kunduzgi",children:"Kunduzgi"}),(0,b.jsx)("option",{value:"Kechgi",children:"Kechgi"})]})]})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)("button",{type:"button",onClick:()=>h({dateFrom:"",dateTo:"",product:"all",shift:"all"}),className:"px-4 py-2 border border-[#E2E8F0] rounded-lg text-sm text-[#0F172A] hover:bg-[#F1F5F9] mt-2",children:"Filtrlarni tozalash"})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg p-6 card-shadow",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-[#0F172A] mb-4",children:"Batchlar bo'yicha tafsilot"}),m&&(0,b.jsx)("p",{className:"mb-4 text-sm text-red-600",children:m}),(0,b.jsx)(d.DataTable,{columns:f,data:q,searchableFields:["batchId","product","shift","line","operator","transport"],renderCell:(a,b)=>"quantity"===b.key?`${g.format(a[b.key])} ${a.unit}`:"price"===b.key||"totalSum"===b.key?`${g.format(a[b.key])} so'm`:a[b.key],footerTotals:q.reduce((a,b)=>(a.quantity+=b.quantity,a.totalSum+=b.totalSum,a.count+=1,a),{quantity:0,totalSum:0,count:0})})]})]})}a.s(["default",()=>l])}];

//# sourceMappingURL=_28771ee1._.js.map