{"version":3,"sources":["../../../../app/owner-dashboard/payroll/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useMemo, useState } from \"react\"\r\n\r\nimport { DataTable } from \"@/components/data-table\"\r\nimport { Modal } from \"@/components/modal\"\r\nimport { SelectField } from \"@/components/select-field\"\r\nimport { ApiError, get, post } from \"@/styles/lib/api\"\r\n\r\ntype PayrollRecord = {\r\n  id: string\r\n  employee: string\r\n  department: string\r\n  role: string\r\n  month: string\r\n  baseSalary: number\r\n  overtime: number\r\n  deductions: number\r\n  total: number\r\n  advance: number\r\n  remaining: number\r\n  status: string\r\n  payoutDate: string\r\n}\r\n\r\ntype Employee = {\r\n  id: number\r\n  employeeCode: string\r\n  fullName: string\r\n  role: string\r\n  department: string\r\n  baseSalary: number\r\n}\r\n\r\ntype PayrollFiltersResponse = {\r\n  departments?: string[]\r\n  statuses?: string[]\r\n}\r\n\r\nfunction mapPayrollDtoToRecord(item: any): PayrollRecord {\r\n  const id = item.id ?? item.payrollId ?? \"\"\r\n\r\n  const employeeName =\r\n    item.employee ??\r\n    item.employeeName ??\r\n    item.fullName ??\r\n    item.name ??\r\n    (item.employeeCode ? String(item.employeeCode) : \"UNKNOWN\")\r\n\r\n  const department = item.department ?? item.departmentName ?? \"-\"\r\n  const role = item.role ?? item.position ?? \"\"\r\n\r\n  const month =\r\n    item.month ??\r\n    item.monthLabel ??\r\n    (item.year != null && item.monthNumber != null\r\n      ? `${item.year} M${String(item.monthNumber).padStart(2, \"0\")}`\r\n      : \"\")\r\n\r\n  const baseSalary = item.baseSalary ?? item.salary ?? 0\r\n  const overtime = item.overtime ?? 0\r\n  const deductions = item.deductions ?? 0\r\n  const total = item.total ?? item.totalSalary ?? baseSalary\r\n  const advance = item.advance ?? 0\r\n  const remaining = item.remaining ?? total - advance\r\n  const status = item.status ?? \"\"\r\n  const payoutDate = item.payoutDate ?? item.date ?? item.loggedAt ?? item.createdAt ?? \"\"\r\n\r\n  return {\r\n    id: String(id),\r\n    employee: employeeName,\r\n    department,\r\n    role,\r\n    month,\r\n    baseSalary,\r\n    overtime,\r\n    deductions,\r\n    total,\r\n    advance,\r\n    remaining,\r\n    status,\r\n    payoutDate,\r\n  }\r\n}\r\n\r\nconst columns = [\r\n  { key: \"id\", label: \"ID\", sortable: true },\r\n  { key: \"employee\", label: \"Xodim\", sortable: true },\r\n  { key: \"role\", label: \"Lavozim\", sortable: false },\r\n  { key: \"month\", label: \"Oyi\", sortable: true },\r\n  { key: \"total\", label: \"Umumiy oyligi ($)\", sortable: true },\r\n  { key: \"advance\", label: \"Olgan avansi ($)\", sortable: true },\r\n  { key: \"remaining\", label: \"Qoldiq ($)\", sortable: true },\r\n  { key: \"status\", label: \"Status\", sortable: true },\r\n  { key: \"payoutDate\", label: \"To'lov sanasi\", sortable: true },\r\n]\r\n\r\nconst currencyFormatter = new Intl.NumberFormat(\"ru-RU\", { style: \"currency\", currency: \"USD\", maximumFractionDigits: 0 })\r\n\r\nconst getCurrentMonthLabel = () => {\r\n  const now = new Date()\r\n  const year = now.getFullYear()\r\n  const month = now.getMonth() + 1\r\n  return `${year} M${String(month).padStart(2, \"0\")}`\r\n}\r\n\r\nconst today = new Date()\r\nconst currentYear = today.getFullYear()\r\nconst defaultDateFrom = `${currentYear}-01-01`\r\nconst defaultDateTo = today.toISOString().slice(0, 10)\r\n\r\nexport default function OwnerPayrollPage() {\r\n  const [filters, setFilters] = useState({\r\n    dateFrom: defaultDateFrom,\r\n    dateTo: defaultDateTo,\r\n    status: \"all\",\r\n  })\r\n  const [records, setRecords] = useState<PayrollRecord[]>([])\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [isPaySalaryModalOpen, setIsPaySalaryModalOpen] = useState(false)\r\n  const [isAddEmployeeModalOpen, setIsAddEmployeeModalOpen] = useState(false)\r\n  const [selectedEmployee, setSelectedEmployee] = useState<PayrollRecord | null>(null)\r\n  const [paymentData, setPaymentData] = useState({\r\n    amount: \"\",\r\n    paymentDate: new Date().toISOString().split(\"T\")[0],\r\n    notes: \"\",\r\n  })\r\n  const [newEmployee, setNewEmployee] = useState({\r\n    employee: \"\",\r\n    role: \"\",\r\n    month: getCurrentMonthLabel(),\r\n    baseSalary: \"\",\r\n  })\r\n  const [payError, setPayError] = useState<string | null>(null)\r\n  const [isPaying, setIsPaying] = useState(false)\r\n  const [addEmployeeError, setAddEmployeeError] = useState<string | null>(null)\r\n  const [isAddingEmployee, setIsAddingEmployee] = useState(false)\r\n  const [employees, setEmployees] = useState<Employee[]>([])\r\n  const [payrollDepartments, setPayrollDepartments] = useState<string[]>([])\r\n  const [payrollStatuses, setPayrollStatuses] = useState<string[]>([])\r\n  const [employeeRoles, setEmployeeRoles] = useState<string[]>([])\r\n\r\n  useEffect(() => {\r\n    let cancelled = false\r\n\r\n    const fetchPayroll = async () => {\r\n      setIsLoading(true)\r\n      setError(null)\r\n      try {\r\n        const response = await get<any[] | { items?: any[] }>(\"/payroll\", {\r\n          params: {\r\n            dateFrom: filters.dateFrom || undefined,\r\n            dateTo: filters.dateTo || undefined,\r\n            status: filters.status === \"all\" ? undefined : filters.status,\r\n          },\r\n        })\r\n        if (cancelled) return\r\n        const items = Array.isArray(response) ? response : response.items ?? []\r\n        setRecords(items.map((item) => mapPayrollDtoToRecord(item)))\r\n      } catch (err: any) {\r\n        if (cancelled) return\r\n        if (err instanceof ApiError) {\r\n          const backendMessage =\r\n            (err.data && (err.data as any).message) || err.message || \"Oylik yozuvlarini yuklashda xatolik yuz berdi\"\r\n          setError(backendMessage)\r\n        } else {\r\n          setError(\"Oylik yozuvlarini yuklashda xatolik yuz berdi. Iltimos, qayta urinib ko'ring.\")\r\n        }\r\n      } finally {\r\n        if (!cancelled) {\r\n          setIsLoading(false)\r\n        }\r\n      }\r\n    }\r\n\r\n    fetchPayroll()\r\n\r\n    return () => {\r\n      cancelled = true\r\n    }\r\n  }, [filters.dateFrom, filters.dateTo, filters.status])\r\n\r\n  useEffect(() => {\r\n    let cancelled = false\r\n\r\n    const fetchMeta = async () => {\r\n      try {\r\n        const [filtersResponse, employeesResponse, employeesFiltersResponse] = await Promise.all([\r\n          get<PayrollFiltersResponse>(\"/payroll/filters\"),\r\n          get<Employee[] | { items?: Employee[] }>(\"/employees\", {\r\n            params: {\r\n              department: \"\",\r\n              role: \"\",\r\n              active: true,\r\n            },\r\n          }),\r\n          get<{ departments: string[]; roles: string[] }>(\"/employees/filters\"),\r\n        ])\r\n\r\n        if (cancelled) return\r\n\r\n        const payrollDeps = filtersResponse.departments ?? []\r\n        const payrollStats = filtersResponse.statuses ?? []\r\n        setPayrollDepartments(payrollDeps)\r\n        setPayrollStatuses(payrollStats)\r\n\r\n        const employeeItems = Array.isArray(employeesResponse)\r\n          ? employeesResponse\r\n          : employeesResponse.items ?? []\r\n        setEmployees(employeeItems)\r\n\r\n        const rolesFromFilters = employeesFiltersResponse.roles ?? []\r\n        setEmployeeRoles(rolesFromFilters)\r\n\r\n        setNewEmployee((prev) => ({\r\n          ...prev,\r\n          role: prev.role || rolesFromFilters[0] || \"\",\r\n        }))\r\n      } catch {\r\n      }\r\n    }\r\n\r\n    fetchMeta()\r\n\r\n    return () => {\r\n      cancelled = true\r\n    }\r\n  }, [])\r\n\r\n  const withinRange = (dateStr: string) => {\r\n    const current = new Date(dateStr).getTime()\r\n    const from = filters.dateFrom ? new Date(filters.dateFrom).getTime() : undefined\r\n    const to = filters.dateTo ? new Date(filters.dateTo).getTime() : undefined\r\n    const afterFrom = typeof from === \"number\" ? current >= from : true\r\n    const beforeTo = typeof to === \"number\" ? current <= to : true\r\n    return afterFrom && beforeTo\r\n  }\r\n\r\n  const filteredRecords = useMemo(\r\n    () =>\r\n      records.filter((record) => {\r\n        const matchesStatus = filters.status === \"all\" || record.status === filters.status\r\n        return matchesStatus && withinRange(record.payoutDate)\r\n      }),\r\n    [records, filters.status, filters.dateFrom, filters.dateTo],\r\n  )\r\n\r\n  const totals = filteredRecords.reduce(\r\n    (acc, record) => {\r\n      acc.total += record.total\r\n      acc.count += 1\r\n      return acc\r\n    },\r\n    { total: 0, count: 0 },\r\n  )\r\n\r\n  const avgSalary = totals.count ? totals.total / totals.count : 0\r\n\r\n  const roleOptions = useMemo(\r\n    () => employeeRoles.map((role) => ({ value: role, label: role })),\r\n    [employeeRoles],\r\n  )\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div>\r\n        <h1 className=\"text-3xl font-bold text-[#0F172A]\">Ishchilar oyligi</h1>\r\n        <p className=\"text-[#64748B] mt-1\">Bo'limlar kesimidagi to'lovlar holati</p>\r\n      </div>\r\n\r\n      <div className=\"bg-white rounded-lg p-6 card-shadow space-y-4\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n          <div>\r\n            <label className=\"text-sm font-semibold text-[#0F172A] mb-2 block\">Boshlanish sanasi</label>\r\n            <input\r\n              type=\"date\"\r\n              value={filters.dateFrom}\r\n              onChange={(e) => setFilters((prev) => ({ ...prev, dateFrom: e.target.value }))}\r\n              className=\"w-full px-3 py-2 border border-[#E2E8F0] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#2563EB]\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-semibold text-[#0F172A] mb-2 block\">Tugash sanasi</label>\r\n            <input\r\n              type=\"date\"\r\n              value={filters.dateTo}\r\n              onChange={(e) => setFilters((prev) => ({ ...prev, dateTo: e.target.value }))}\r\n              className=\"w-full px-3 py-2 border border-[#E2E8F0] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#2563EB]\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-semibold text-[#0F172A] mb-2 block\">Status</label>\r\n            <SelectField\r\n              value={filters.status}\r\n              onChange={(status) => setFilters((prev) => ({ ...prev, status }))}\r\n              options={[\r\n                { value: \"all\", label: \"Barchasi\" },\r\n                ...payrollStatuses.map((s) => ({ value: s, label: s })),\r\n              ]}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"flex justify-end\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={() =>\r\n              setFilters({\r\n                dateFrom: \"\",\r\n                dateTo: \"\",\r\n                status: \"all\",\r\n              })\r\n            }\r\n            className=\"px-4 py-2 border border-[#E2E8F0] rounded-lg text-sm text-[#0F172A] hover:bg-[#F1F5F9] mt-2\"\r\n          >\r\n            Filtrlarni tozalash\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n\r\n\r\n      <div className=\"bg-white rounded-lg p-6 card-shadow\">\r\n        <div className=\"flex justify-between items-center mb-4\">\r\n          <h2 className=\"text-lg font-semibold text-[#0F172A]\">Ish haqi ro'yxati</h2>\r\n          <button\r\n            onClick={() => setIsAddEmployeeModalOpen(true)}\r\n            className=\"px-4 py-2 bg-[#2563EB] text-white rounded-lg hover:bg-[#1D4ED8] transition-colors font-semibold flex items-center gap-2\"\r\n          >\r\n            <span>+</span>\r\n            <span>Yangi ishchini ishga olish</span>\r\n          </button>\r\n        </div>\r\n        {error && <p className=\"mb-4 text-sm text-red-600\">{error}</p>}\r\n        <DataTable\r\n          columns={columns}\r\n          data={filteredRecords}\r\n          searchableFields={[\"id\", \"employee\", \"department\", \"role\", \"status\"]}\r\n          renderCell={(row, col) => {\r\n            if (col.key === \"total\" || col.key === \"advance\") {\r\n              return currencyFormatter.format(row[col.key])\r\n            }\r\n            if (col.key === \"remaining\") {\r\n              const remaining = row[col.key]\r\n              const isNegative = remaining < 0\r\n              return (\r\n                <span className={isNegative ? \"text-red-600 font-semibold\" : \"\"}>\r\n                  {isNegative ? \"-\" : \"\"}\r\n                  {currencyFormatter.format(Math.abs(remaining))}\r\n                </span>\r\n              )\r\n            }\r\n            return row[col.key]\r\n          }}\r\n          actions={(row: any) => (\r\n            <button\r\n              onClick={() => {\r\n                setPayError(null)\r\n                setSelectedEmployee(row as PayrollRecord)\r\n                setPaymentData({\r\n                  amount: row.remaining > 0 ? row.remaining.toString() : \"\",\r\n                  paymentDate: new Date().toISOString().split(\"T\")[0],\r\n                  notes: \"\",\r\n                })\r\n                setIsPaySalaryModalOpen(true)\r\n              }}\r\n              className=\"px-3 py-1 bg-[#10B981] text-white rounded-lg hover:bg-[#059669] transition-colors text-sm font-semibold\"\r\n            >\r\n              Oylik berish\r\n            </button>\r\n          )}\r\n          footerTotals={filteredRecords.reduce(\r\n            (acc, record) => {\r\n              acc.total += record.total\r\n              acc.advance += record.advance\r\n              acc.remaining += record.remaining\r\n              acc.count += 1\r\n              return acc\r\n            },\r\n            { total: 0, advance: 0, remaining: 0, count: 0 },\r\n          )}\r\n        />\r\n      </div>\r\n\r\n      <Modal\r\n        isOpen={isPaySalaryModalOpen}\r\n        title={selectedEmployee ? `${selectedEmployee.employee} uchun oylik berish` : \"Oylik berish\"}\r\n        onClose={() => {\r\n          setIsPaySalaryModalOpen(false)\r\n          setSelectedEmployee(null)\r\n          setPaymentData({\r\n            amount: \"\",\r\n            paymentDate: new Date().toISOString().split(\"T\")[0],\r\n            notes: \"\",\r\n          })\r\n          setPayError(null)\r\n          setIsPaying(false)\r\n        }}\r\n        size=\"lg\"\r\n      >\r\n        {selectedEmployee && (\r\n          <form\r\n            onSubmit={async (e) => {\r\n              e.preventDefault()\r\n              if (!selectedEmployee) return\r\n              const amount = Number(paymentData.amount)\r\n              setIsPaying(true)\r\n              setPayError(null)\r\n\r\n              try {\r\n                const body = {\r\n                  amount,\r\n                  paymentDate: paymentData.paymentDate,\r\n                  notes: paymentData.notes || undefined,\r\n                }\r\n\r\n                const response = await post<PayrollRecord | { record?: PayrollRecord }>(\r\n                  `/payroll/${selectedEmployee.id}/pay`,\r\n                  body,\r\n                )\r\n                const updated = (response as any).record ?? response\r\n\r\n                setRecords((prev) => prev.map((r) => (r.id === updated.id ? (updated as PayrollRecord) : r)))\r\n\r\n                setIsPaySalaryModalOpen(false)\r\n                setSelectedEmployee(null)\r\n                setPaymentData({\r\n                  amount: \"\",\r\n                  paymentDate: new Date().toISOString().split(\"T\")[0],\r\n                  notes: \"\",\r\n                })\r\n              } catch (err: any) {\r\n                if (err instanceof ApiError) {\r\n                  const backendMessage =\r\n                    (err.data && (err.data as any).message) ||\r\n                    err.message ||\r\n                    \"Oylik to'lovini saqlashda xatolik yuz berdi\"\r\n                  setPayError(backendMessage)\r\n                } else {\r\n                  setPayError(\"Oylik to'lovini saqlashda xatolik yuz berdi. Iltimos, qayta urinib ko'ring.\")\r\n                }\r\n              } finally {\r\n                setIsPaying(false)\r\n              }\r\n            }}\r\n            className=\"space-y-4\"\r\n          >\r\n            <div className=\"bg-[#F8FAFC] p-4 rounded-lg space-y-2\">\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-sm text-[#64748B]\">Xodim:</span>\r\n                <span className=\"text-sm font-semibold text-[#0F172A]\">{selectedEmployee.employee}</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-sm text-[#64748B]\">Bo'lim:</span>\r\n                <span className=\"text-sm font-semibold text-[#0F172A]\">{selectedEmployee.department}</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-sm text-[#64748B]\">Umumiy oyligi:</span>\r\n                <span className=\"text-sm font-semibold text-[#0F172A]\">{currencyFormatter.format(selectedEmployee.total)}</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-sm text-[#64748B]\">Olgan avansi:</span>\r\n                <span className=\"text-sm font-semibold text-[#0F172A]\">{currencyFormatter.format(selectedEmployee.advance)}</span>\r\n              </div>\r\n              <div className=\"flex justify-between border-t border-[#E2E8F0] pt-2\">\r\n                <span className=\"text-sm font-semibold text-[#0F172A]\">Qoldiq:</span>\r\n                <span className=\"text-sm font-semibold text-[#10B981]\">{currencyFormatter.format(selectedEmployee.remaining)}</span>\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"text-sm font-semibold text-[#0F172A] mb-2 block\">To'lov miqdori ($)</label>\r\n              <input\r\n                type=\"number\"\r\n                value={paymentData.amount}\r\n                onChange={(e) => setPaymentData((prev) => ({ ...prev, amount: e.target.value }))}\r\n                className=\"w-full px-3 py-2 border border-[#E2E8F0] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#2563EB]\"\r\n                placeholder=\"0\"\r\n                min=\"0\"\r\n                step=\"0.01\"\r\n                required\r\n              />\r\n              <p className=\"text-xs text-[#64748B] mt-1\">\r\n                Qoldiq: {currencyFormatter.format(selectedEmployee.remaining)}\r\n                {selectedEmployee.remaining < 0 && (\r\n                  <span className=\"text-red-600 ml-2\">(Qoldiqdan ko'p berilgan: {currencyFormatter.format(Math.abs(selectedEmployee.remaining))})</span>\r\n                )}\r\n              </p>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"text-sm font-semibold text-[#0F172A] mb-2 block\">To'lov sanasi</label>\r\n              <input\r\n                type=\"date\"\r\n                value={paymentData.paymentDate}\r\n                onChange={(e) => setPaymentData((prev) => ({ ...prev, paymentDate: e.target.value }))}\r\n                className=\"w-full px-3 py-2 border border-[#E2E8F0] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#2563EB]\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"text-sm font-semibold text-[#0F172A] mb-2 block\">Izoh (ixtiyoriy)</label>\r\n              <textarea\r\n                value={paymentData.notes}\r\n                onChange={(e) => setPaymentData((prev) => ({ ...prev, notes: e.target.value }))}\r\n                className=\"w-full px-3 py-2 border border-[#E2E8F0] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#2563EB]\"\r\n                rows={3}\r\n                placeholder=\"Qo'shimcha ma'lumotlar...\"\r\n              />\r\n            </div>\r\n\r\n            {payError && <p className=\"text-sm text-red-600\">{payError}</p>}\r\n\r\n            <div className=\"flex gap-3 pt-4\">\r\n              <button\r\n                type=\"submit\"\r\n                className=\"flex-1 px-4 py-2 bg-[#10B981] text-white rounded-lg hover:bg-[#059669] transition-colors font-semibold disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                disabled={isPaying}\r\n              >\r\n                Oylik berish\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => {\r\n                  setIsPaySalaryModalOpen(false)\r\n                  setSelectedEmployee(null)\r\n                  setPaymentData({\r\n                    amount: \"\",\r\n                    paymentDate: new Date().toISOString().split(\"T\")[0],\r\n                    notes: \"\",\r\n                  })\r\n                }}\r\n                className=\"flex-1 px-4 py-2 bg-gray-200 text-[#0F172A] rounded-lg hover:bg-gray-300 transition-colors font-semibold\"\r\n              >\r\n                Bekor qilish\r\n              </button>\r\n            </div>\r\n          </form>\r\n        )}\r\n      </Modal>\r\n\r\n      <Modal\r\n        isOpen={isAddEmployeeModalOpen}\r\n        title=\"Yangi ishchini ishga olish\"\r\n        onClose={() => {\r\n          setIsAddEmployeeModalOpen(false)\r\n          setNewEmployee({\r\n            employee: \"\",\r\n            role: \"\",\r\n            month: getCurrentMonthLabel(),\r\n            baseSalary: \"\",\r\n          })\r\n          setAddEmployeeError(null)\r\n          setIsAddingEmployee(false)\r\n        }}\r\n        size=\"lg\"\r\n      >\r\n        <form\r\n          onSubmit={async (e) => {\r\n            e.preventDefault()\r\n            setIsAddingEmployee(true)\r\n            setAddEmployeeError(null)\r\n\r\n            try {\r\n              const name = newEmployee.employee.trim()\r\n              if (!name) {\r\n                setAddEmployeeError(\"Xodim ismi kiritilmagan\")\r\n                setIsAddingEmployee(false)\r\n                return\r\n              }\r\n\r\n              const monthInput = newEmployee.month.trim()\r\n              const match = monthInput.match(/^(\\d{4})\\s*M(\\d{1,2})$/)\r\n              if (!match) {\r\n                setAddEmployeeError(\"Oyi noto'g'ri formatda. Masalan: 2025 M12\")\r\n                setIsAddingEmployee(false)\r\n                return\r\n              }\r\n\r\n              const year = Number(match[1])\r\n              const month = Number(match[2])\r\n              const monthLabel = monthInput\r\n\r\n              const payload = {\r\n                // ВРЕМЕННАЯ СХЕМА: backend будет обновлён, чтобы обрабатывать новый сотрудник по имени/роли\r\n                employeeId: 0, // заглушка, реальный ID пусть определяет backend\r\n                employeeName: name,\r\n                employeeRole: newEmployee.role || null,\r\n                year,\r\n                month,\r\n                monthLabel,\r\n                baseSalary: newEmployee.baseSalary !== \"\" ? Number(newEmployee.baseSalary) || 0 : 0,\r\n                overtime: 0,\r\n                deductions: 0,\r\n                advance: 0,\r\n              }\r\n\r\n              await post(\"/payroll\", payload)\r\n\r\n              try {\r\n                const response = await get<any[] | { items?: any[] }>(\"/payroll\", {\r\n                  params: {\r\n                    dateFrom: filters.dateFrom,\r\n                    dateTo: filters.dateTo,\r\n                    status: filters.status === \"all\" ? undefined : filters.status,\r\n                  },\r\n                })\r\n                const items = Array.isArray(response) ? response : response.items ?? []\r\n                setRecords(items.map((item) => mapPayrollDtoToRecord(item)))\r\n              } catch {\r\n              }\r\n\r\n              setIsAddEmployeeModalOpen(false)\r\n              setNewEmployee({\r\n                employee: \"\",\r\n                role: \"\",\r\n                month: getCurrentMonthLabel(),\r\n                baseSalary: \"\",\r\n              })\r\n            } catch (err: any) {\r\n              if (err instanceof ApiError) {\r\n                const backendMessage =\r\n                  (err.data && (err.data as any).message) || err.message || \"Yangi ishchini saqlashda xatolik yuz berdi\"\r\n                setAddEmployeeError(backendMessage)\r\n              } else {\r\n                setAddEmployeeError(\"Yangi ishchini saqlashda xatolik yuz berdi. Iltimos, qayta urinib ko'ring.\")\r\n              }\r\n            } finally {\r\n              setIsAddingEmployee(false)\r\n            }\r\n          }}\r\n          className=\"space-y-4\"\r\n        >\r\n          <div>\r\n            <label className=\"text-sm font-semibold text-[#0F172A] mb-2 block\">Xodim ismi</label>\r\n            <input\r\n              type=\"text\"\r\n              value={newEmployee.employee}\r\n              onChange={(e) =>\r\n                setNewEmployee((prev) => ({\r\n                  ...prev,\r\n                  employee: e.target.value,\r\n                }))\r\n              }\r\n              className=\"w-full px-3 py-2 border border-[#E2E8F0] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#2563EB]\"\r\n              placeholder=\"Xodim ismini kiriting\"\r\n              required\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-semibold text-[#0F172A] mb-2 block\">Lavozim</label>\r\n            <SelectField\r\n              value={newEmployee.role}\r\n              onChange={(role) =>\r\n                setNewEmployee((prev) => ({\r\n                  ...prev,\r\n                  role,\r\n                }))\r\n              }\r\n              options={roleOptions}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-semibold text-[#0F172A] mb-2 block\">Oyi</label>\r\n            <input\r\n              type=\"text\"\r\n              value={newEmployee.month}\r\n              onChange={(e) => setNewEmployee((prev) => ({ ...prev, month: e.target.value }))}\r\n              className=\"w-full px-3 py-2 border border-[#E2E8F0] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#2563EB]\"\r\n              placeholder=\"Masalan: 2025 M12\"\r\n              required\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-semibold text-[#0F172A] mb-2 block\">Asosiy oylik ($)</label>\r\n            <input\r\n              type=\"number\"\r\n              value={newEmployee.baseSalary}\r\n              onChange={(e) => setNewEmployee((prev) => ({ ...prev, baseSalary: e.target.value }))}\r\n              className=\"w-full px-3 py-2 border border-[#E2E8F0] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#2563EB]\"\r\n              placeholder=\"0\"\r\n              min=\"0\"\r\n              step=\"0.01\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"flex gap-3 pt-4\">\r\n            <button\r\n              type=\"submit\"\r\n              className=\"flex-1 px-4 py-2 bg-[#2563EB] text-white rounded-lg hover:bg-[#1D4ED8] transition-colors font-semibold disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              disabled={isAddingEmployee}\r\n            >\r\n              Saqlash\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                setIsAddEmployeeModalOpen(false)\r\n                setNewEmployee({\r\n                  employee: \"\",\r\n                  role: \"\",\r\n                  month: getCurrentMonthLabel(),\r\n                  baseSalary: \"\",\r\n                })\r\n                setAddEmployeeError(null)\r\n              }}\r\n              className=\"flex-1 px-4 py-2 bg-gray-200 text-[#0F172A] rounded-lg hover:bg-gray-300 transition-colors font-semibold\"\r\n            >\r\n              Bekor qilish\r\n            </button>\r\n          </div>\r\n          {addEmployeeError && <p className=\"text-sm text-red-600\">{addEmployeeError}</p>}\r\n        </form>\r\n      </Modal>\r\n    </div>\r\n  )\r\n}\r\n\r\n"],"names":[],"mappings":"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"}