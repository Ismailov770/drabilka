{"version":3,"sources":["../../../../styles/lib/api.ts","../../../../app/owner-dashboard/page.tsx"],"sourcesContent":["const API_BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL ?? \"http://localhost:8080/api\"\r\n\r\nexport type HttpMethod = \"GET\" | \"POST\" | \"PUT\" | \"PATCH\" | \"DELETE\"\r\n\r\nexport interface RequestOptions {\r\n  method?: HttpMethod\r\n  params?: Record<string, string | number | boolean | null | undefined>\r\n  body?: any\r\n  headers?: Record<string, string>\r\n  signal?: AbortSignal\r\n}\r\n\r\nexport class ApiError<T = any> extends Error {\r\n  status: number\r\n  data: T | null\r\n\r\n  constructor(message: string, status: number, data: T | null = null) {\r\n    super(message)\r\n    this.name = \"ApiError\"\r\n    this.status = status\r\n    this.data = data\r\n  }\r\n}\r\n\r\nfunction buildUrl(path: string, params?: RequestOptions[\"params\"]): string {\r\n  const base = path.startsWith(\"http\") ? path : `${API_BASE_URL}${path}`\r\n  if (!params) return base\r\n\r\n  const url = new URL(base)\r\n\r\n  Object.entries(params).forEach(([key, value]) => {\r\n    if (value === undefined || value === null) return\r\n    url.searchParams.append(key, String(value))\r\n  })\r\n\r\n  return url.toString()\r\n}\r\n\r\nexport async function apiRequest<T = any>(path: string, options: RequestOptions = {}): Promise<T> {\r\n  const { method = \"GET\", params, body, headers, signal } = options\r\n\r\n  const url = buildUrl(path, params)\r\n\r\n  let finalHeaders: Record<string, string> = {\r\n    \"Content-Type\": \"application/json\",\r\n    ...headers,\r\n  }\r\n\r\n  if (typeof window !== \"undefined\") {\r\n    try {\r\n      const token = window.localStorage.getItem(\"authToken\")\r\n      if (token && !finalHeaders.Authorization) {\r\n        finalHeaders = {\r\n          ...finalHeaders,\r\n          Authorization: `Bearer ${token}`,\r\n        }\r\n      }\r\n    } catch {\r\n    }\r\n  }\r\n\r\n  const init: RequestInit = {\r\n    method,\r\n    headers: finalHeaders,\r\n    signal,\r\n  }\r\n\r\n  if (body !== undefined && body !== null && method !== \"GET\") {\r\n    if (body instanceof FormData) {\r\n      const { [\"Content-Type\"]: _removed, ...rest } = finalHeaders as Record<string, string>\r\n      finalHeaders = rest\r\n      init.headers = finalHeaders\r\n      init.body = body\r\n    } else {\r\n      init.body = JSON.stringify(body)\r\n    }\r\n  }\r\n\r\n  const response = await fetch(url, init)\r\n  const text = await response.text()\r\n\r\n  let data: any = null\r\n\r\n  if (text) {\r\n    try {\r\n      data = JSON.parse(text)\r\n    } catch {\r\n      data = text\r\n    }\r\n  }\r\n\r\n  if (!response.ok) {\r\n    throw new ApiError(response.statusText || \"Request failed\", response.status, data)\r\n  }\r\n\r\n  return data as T\r\n}\r\n\r\nexport function get<T = any>(path: string, options?: Omit<RequestOptions, \"method\" | \"body\">): Promise<T> {\r\n  return apiRequest<T>(path, { ...options, method: \"GET\" })\r\n}\r\n\r\nexport function post<T = any, B = any>(\r\n  path: string,\r\n  body?: B,\r\n  options?: Omit<RequestOptions, \"method\" | \"body\">,\r\n): Promise<T> {\r\n  return apiRequest<T>(path, { ...options, method: \"POST\", body })\r\n}\r\n\r\nexport function put<T = any, B = any>(\r\n  path: string,\r\n  body?: B,\r\n  options?: Omit<RequestOptions, \"method\" | \"body\">,\r\n): Promise<T> {\r\n  return apiRequest<T>(path, { ...options, method: \"PUT\", body })\r\n}\r\n\r\nexport function patch<T = any, B = any>(\r\n  path: string,\r\n  body?: B,\r\n  options?: Omit<RequestOptions, \"method\" | \"body\">,\r\n): Promise<T> {\r\n  return apiRequest<T>(path, { ...options, method: \"PATCH\", body })\r\n}\r\n\r\nexport function del<T = any, B = any>(\r\n  path: string,\r\n  body?: B,\r\n  options?: Omit<RequestOptions, \"method\" | \"body\">,\r\n): Promise<T> {\r\n  return apiRequest<T>(path, { ...options, method: \"DELETE\", body })\r\n}\r\n\r\nexport { API_BASE_URL }\r\n","\"use client\"\n\nimport { useEffect, useMemo, useState } from \"react\"\nimport Link from \"next/link\"\nimport { ApiError, get } from \"@/styles/lib/api\"\n\nconst timelineData = [\n  { date: \"2024-01-02\", produced: 145, sold: 118, expenses: 23000, payroll: 9000, machineUsage: 15 },\n  { date: \"2024-01-08\", produced: 162, sold: 134, expenses: 25000, payroll: 9800, machineUsage: 18 },\n  { date: \"2024-01-15\", produced: 178, sold: 150, expenses: 26800, payroll: 10100, machineUsage: 20 },\n  { date: \"2024-01-22\", produced: 185, sold: 160, expenses: 27600, payroll: 10200, machineUsage: 22 },\n  { date: \"2024-01-29\", produced: 191, sold: 168, expenses: 28300, payroll: 10400, machineUsage: 21 },\n  { date: \"2024-02-05\", produced: 205, sold: 180, expenses: 29500, payroll: 10700, machineUsage: 23 },\n  { date: \"2024-02-12\", produced: 212, sold: 186, expenses: 30200, payroll: 10800, machineUsage: 24 },\n  { date: \"2024-02-19\", produced: 225, sold: 194, expenses: 31400, payroll: 11000, machineUsage: 25 },\n]\n\ntype ProductionBatch = {\n  batchId: string\n  product: string\n  shift: string\n  line: string\n  quantity: number\n  unit: string\n  producedAt: string\n}\n\ntype Expense = {\n  id: string\n  title?: string\n  category: string\n  amount: number\n  date: string\n}\n\ntype VehicleLogEntry = {\n  vehicleIdCode: string\n  direction: string\n  material: string\n  driver: string\n  entryAt?: string\n  exitAt?: string\n}\n\nconst dateFormatter = new Intl.DateTimeFormat(\"uz-UZ\", { day: \"2-digit\", month: \"short\" })\nconst dateTimeFormatter = new Intl.DateTimeFormat(\"uz-UZ\", { day: \"2-digit\", month: \"short\", hour: \"2-digit\", minute: \"2-digit\" })\nconst numberFormatter = new Intl.NumberFormat(\"ru-RU\")\nconst currencyFormatter = new Intl.NumberFormat(\"ru-RU\", { style: \"currency\", currency: \"USD\", maximumFractionDigits: 0 })\nconst quickRanges = [\n  { label: \"7 kun\", days: 7 },\n  { label: \"14 kun\", days: 14 },\n  { label: \"30 kun\", days: 30 },\n]\n\nconst today = new Date()\nconst currentYear = today.getFullYear()\nconst defaultDateFrom = `${currentYear}-01-01`\nconst defaultDateTo = today.toISOString().slice(0, 10)\n\nexport default function OwnerDashboard() {\n  const [filters, setFilters] = useState({\n    dateFrom: defaultDateFrom,\n    dateTo: defaultDateTo,\n  })\n  const [latestBatches, setLatestBatches] = useState<ProductionBatch[]>([])\n  const [batchesError, setBatchesError] = useState<string | null>(null)\n  const [isBatchesLoading, setIsBatchesLoading] = useState(false)\n\n  const [expenses, setExpenses] = useState<Expense[]>([])\n  const [expensesError, setExpensesError] = useState<string | null>(null)\n\n  const [vehicleLogs, setVehicleLogs] = useState<VehicleLogEntry[]>([])\n  const [vehiclesError, setVehiclesError] = useState<string | null>(null)\n\n  const withinRange = (dateStr: string) => {\n    const current = new Date(dateStr).getTime()\n    const from = filters.dateFrom ? new Date(filters.dateFrom).getTime() : undefined\n    const to = filters.dateTo ? new Date(filters.dateTo).getTime() : undefined\n    const afterFrom = typeof from === \"number\" ? current >= from : true\n    const beforeTo = typeof to === \"number\" ? current <= to : true\n    return afterFrom && beforeTo\n  }\n\n  useEffect(() => {\n    let cancelled = false\n\n    const fetchDashboardData = async () => {\n      setBatchesError(null)\n      setExpensesError(null)\n      setVehiclesError(null)\n\n      try {\n        setIsBatchesLoading(true)\n\n        const [batchesResponse, expensesResponse, vehiclesResponse] = await Promise.all([\n          get<ProductionBatch[] | { items?: ProductionBatch[] }>(\"/production/batches\", {\n            params: {\n              dateFrom: filters.dateFrom || undefined,\n              dateTo: filters.dateTo || undefined,\n            },\n          }),\n          get<Expense[] | { items?: Expense[] }>(\"/expenses\", {\n            params: {\n              dateFrom: filters.dateFrom || undefined,\n              dateTo: filters.dateTo || undefined,\n            },\n          }),\n          get<VehicleLogEntry[] | { items?: VehicleLogEntry[] }>(\"/vehicles/logs\", {\n            params: {\n              dateFrom: filters.dateFrom || undefined,\n              dateTo: filters.dateTo || undefined,\n            },\n          }),\n        ])\n\n        if (cancelled) return\n\n        const batches = Array.isArray(batchesResponse) ? batchesResponse : batchesResponse.items ?? []\n        const sortedBatches = [...batches].sort((a, b) => {\n          const aTime = new Date(a.producedAt).getTime()\n          const bTime = new Date(b.producedAt).getTime()\n          if (aTime === bTime) {\n            return String(b.batchId).localeCompare(String(a.batchId))\n          }\n          return bTime - aTime\n        })\n        setLatestBatches(sortedBatches.slice(0, 4))\n\n        const expenseItems = Array.isArray(expensesResponse) ? expensesResponse : expensesResponse.items ?? []\n        setExpenses(expenseItems)\n\n        const vehicleItems = Array.isArray(vehiclesResponse) ? vehiclesResponse : vehiclesResponse.items ?? []\n        setVehicleLogs(vehicleItems)\n      } catch (err: any) {\n        if (cancelled) return\n\n        if (err instanceof ApiError) {\n          const backendMessage = (err.data && (err.data as any).message) || err.message || \"Dashboard ma'lumotlarini yuklashda xatolik yuz berdi\"\n          setBatchesError(backendMessage)\n        } else {\n          setBatchesError(\"Dashboard ma'lumotlarini yuklashda xatolik yuz berdi. Iltimos, qayta urinib ko'ring.\")\n        }\n      } finally {\n        if (!cancelled) {\n          setIsBatchesLoading(false)\n        }\n      }\n    }\n\n    fetchDashboardData()\n\n    return () => {\n      cancelled = true\n    }\n  }, [filters.dateFrom, filters.dateTo])\n\n  const shiftToUzbekLabel = (shift: string) => {\n    switch (shift) {\n      case \"DAY\":\n        return \"Kunduzgi smena\"\n      case \"NIGHT\":\n        return \"Kechgi smena\"\n      case \"MORNING\":\n        return \"Tonggi smena\"\n      default:\n        return shift\n    }\n  }\n\n  const expenseSignals = useMemo(() => {\n    const map = new Map<string, number>()\n    for (const e of expenses) {\n      const current = map.get(e.category) || 0\n      map.set(e.category, current + e.amount)\n    }\n\n    return Array.from(map.entries())\n      .map(([category, total]) => ({ category, total }))\n      .sort((a, b) => b.total - a.total)\n      .slice(0, 4)\n  }, [expenses])\n\n  const filteredTimeline = useMemo(\n    () => timelineData.filter((row) => withinRange(row.date)),\n    [filters.dateFrom, filters.dateTo],\n  )\n\n  const filteredVehicles = useMemo(\n    () =>\n      vehicleLogs.filter((row) => {\n        const timestamp = row.entryAt || row.exitAt\n        if (!timestamp) return false\n        return withinRange(timestamp)\n      }),\n    [vehicleLogs, filters.dateFrom, filters.dateTo],\n  )\n\n  const totals = useMemo(\n    () =>\n      filteredTimeline.reduce(\n        (acc, row) => {\n          acc.produced += row.produced\n          acc.sold += row.sold\n          acc.expenses += row.expenses\n          acc.payroll += row.payroll\n          acc.machine += row.machineUsage\n          return acc\n        },\n        { produced: 0, sold: 0, expenses: 0, payroll: 0, machine: 0 },\n      ),\n    [filteredTimeline],\n  )\n\n  const applyQuickRange = (days: number) => {\n    const end = new Date()\n    const start = new Date(end)\n    start.setDate(start.getDate() - (days - 1))\n    setFilters((prev) => ({\n      ...prev,\n      dateFrom: start.toISOString().slice(0, 10),\n      dateTo: end.toISOString().slice(0, 10),\n    }))\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      <div>\n        <h1 className=\"text-3xl font-semibold text-slate-900\">Boshliq (Owner) Dashboard</h1>\n        <p className=\"text-sm text-slate-500 mt-1\">Mahsulot, rasxod va texnika holati bo'yicha jonli nazorat</p>\n      </div>\n\n      {/* Filtrlar */}\n      <div className=\"bg-white rounded-2xl p-6 card-shadow-lg border border-slate-100 space-y-4\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div>\n            <label className=\"block text-sm font-semibold text-slate-900 mb-2\">Davr boshi</label>\n            <input\n              type=\"date\"\n              value={filters.dateFrom}\n              onChange={(e) => setFilters((prev) => ({ ...prev, dateFrom: e.target.value }))}\n              className=\"w-full px-4 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#2563EB]\"\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-semibold text-slate-900 mb-2\">Davr oxiri</label>\n            <input\n              type=\"date\"\n              value={filters.dateTo}\n              onChange={(e) => setFilters((prev) => ({ ...prev, dateTo: e.target.value }))}\n              className=\"w-full px-4 py-2 border border-[#E2E8F0] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#2563EB]\"\n            />\n          </div>\n        </div>\n        <div className=\"flex flex-wrap gap-2\">\n          {quickRanges.map((range) => (\n            <button\n              key={range.label}\n              onClick={() => applyQuickRange(range.days)}\n              className=\"px-4 py-2 border border-slate-200 text-sm text-[#2563EB] rounded-full bg-slate-50 hover:bg-[#EFF6FF]\"\n            >\n              {range.label} so'nggi\n            </button>\n          ))}\n          <button\n            type=\"button\"\n            onClick={() =>\n              setFilters({\n                dateFrom: \"\",\n                dateTo: \"\",\n              })\n            }\n            className=\"px-4 py-2 border border-slate-200 text-sm text-slate-700 rounded-full bg-white hover:bg-slate-50\"\n          >\n            Filtrlarni tozalash\n          </button>\n        </div>\n      </div>\n\n  \n\n      {/* Batafsil bo'limlar */}\n      <div className=\"grid grid-cols-1 xl:grid-cols-3 gap-6\">\n        <div className=\"xl:col-span-2 bg-white rounded-2xl p-6 card-shadow-lg border border-slate-100\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-lg font-semibold text-slate-900\">Oxirgi batchlar</h2>\n            <span className=\"text-sm text-slate-500\">So'nggi 4 ta partiya</span>\n          </div>\n          {batchesError && <p className=\"mb-4 text-sm text-red-600\">{batchesError}</p>}\n          <div className=\"space-y-4\">\n            {latestBatches.map((batch) => (\n              <div\n                key={batch.batchId}\n                className=\"flex items-center justify-between border border-slate-200 rounded-2xl p-4 hover:bg-slate-50 transition-colors\"\n              >\n                <div>\n                  <p className=\"font-semibold text-slate-900\">\n                    {batch.batchId} · {batch.product}\n                  </p>\n                  <p className=\"text-sm text-slate-500\">\n                    {shiftToUzbekLabel(batch.shift)} · {batch.line} · {dateTimeFormatter.format(new Date(batch.producedAt))}\n                  </p>\n                </div>\n                <div className=\"text-right\">\n                  <p className=\"text-xl font-semibold text-slate-900\">\n                    {batch.quantity} {batch.unit}\n                  </p>\n                </div>\n              </div>\n            ))}\n            {!isBatchesLoading && latestBatches.length === 0 && !batchesError && (\n              <p className=\"text-sm text-slate-400\">Tanlangan davr uchun batchlar topilmadi</p>\n            )}\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-2xl p-6 card-shadow-lg border border-slate-100\">\n          <h2 className=\"text-lg font-semibold text-slate-900 mb-4\">Rasxodlar bo'yicha signal</h2>\n          {expensesError && <p className=\"mb-2 text-sm text-red-600\">{expensesError}</p>}\n          <div className=\"space-y-4\">\n            {expenseSignals.map((item) => (\n              <div\n                key={item.category}\n                className=\"border border-slate-200 rounded-xl p-4 hover:bg-slate-50 transition-colors\"\n              >\n                <div className=\"flex items-center justify-between mb-1\">\n                  <p className=\"font-semibold text-slate-900\">{item.category}</p>\n                </div>\n                <p className=\"text-sm text-slate-400 mb-2\">Kategoriya bo'yicha umumiy sarf</p>\n                <p className=\"text-lg font-semibold text-slate-900\">{currencyFormatter.format(item.total)}</p>\n              </div>\n            ))}\n            {expenseSignals.length === 0 && !expensesError && (\n              <p className=\"text-sm text-slate-400\">Tanlangan davr uchun rasxodlar topilmadi</p>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Mashinalar harakati */}\n      <div className=\"bg-white rounded-2xl p-6 card-shadow-lg border border-slate-100\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h2 className=\"text-lg font-semibold text-slate-900\">Kelib chiqayotgan mashinalar</h2>\n          <div className=\"flex items-center gap-3\">\n            <span className=\"text-sm text-slate-500\">\n              {filters.dateFrom || filters.dateTo ? \"Filtrlash natijalari\" : \"Oxirgi 5 ta yozuv\"}\n            </span>\n            <Link href=\"/owner-dashboard/driver-fuel\" className=\"text-sm text-[#2563EB] hover:underline\">\n              Haydovchi yoqilg'i sarfi\n            </Link>\n          </div>\n        </div>\n        {vehiclesError && <p className=\"mb-4 text-sm text-red-600\">{vehiclesError}</p>}\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead>\n              <tr className=\"border-b border-slate-200\">\n                <th className=\"text-left px-4 py-3 font-semibold text-slate-700\">Mashina</th>\n                <th className=\"text-left px-4 py-3 font-semibold text-slate-700\">Yo'nalish</th>\n                <th className=\"text-left px-4 py-3 font-semibold text-slate-700\">Maqsad</th>\n                <th className=\"text-left px-4 py-3 font-semibold text-slate-700\">Haydovchi</th>\n                <th className=\"text-left px-4 py-3 font-semibold text-slate-700\">Vaqt</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredVehicles.length > 0 ? (\n                filteredVehicles.map((vehicle) => {\n                  const timestamp = vehicle.entryAt || vehicle.exitAt\n                  return (\n                    <tr\n                      key={`${vehicle.vehicleIdCode}-${timestamp}`}\n                      className=\"border-b border-slate-100 hover:bg-slate-50\"\n                    >\n                      <td className=\"px-4 py-3 font-medium text-slate-900\">{vehicle.vehicleIdCode}</td>\n                    <td className=\"px-4 py-3\">\n                      <span\n                        className={`px-3 py-1 rounded-full text-sm font-medium ${\n                          vehicle.direction === \"Kirdi\"\n                            ? \"bg-blue-50 text-blue-700\"\n                            : \"bg-rose-50 text-rose-700\"\n                        }`}\n                      >\n                        {vehicle.direction}\n                      </span>\n                    </td>\n                    <td className=\"px-4 py-3 text-slate-500\">{vehicle.material}</td>\n                    <td className=\"px-4 py-3 text-slate-900\">{vehicle.driver}</td>\n                    <td className=\"px-4 py-3 text-slate-500\">\n                      {timestamp ? dateTimeFormatter.format(new Date(timestamp)) : \"-\"}\n                    </td>\n                  </tr>\n                  )\n                })\n              ) : (\n                <tr>\n                  <td className=\"px-4 py-6 text-center text-slate-400\" colSpan={5}>\n                    Tanlangan vaqt oralig'ida ma'lumot yo'q\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}