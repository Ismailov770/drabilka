(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72161,e=>{"use strict";class t extends Error{status;data;constructor(e,t,a=null){super(e),this.name="ApiError",this.status=t,this.data=a}}async function a(e,s={}){let{method:l="GET",params:r,body:o,headers:i,signal:n}=s,d=function(e,t){let a=e.startsWith("http")?e:`http://localhost:8080/api${e}`;if(!t)return a;let s=new URL(a);return Object.entries(t).forEach(([e,t])=>{null!=t&&s.searchParams.append(e,String(t))}),s.toString()}(e,r),c={"Content-Type":"application/json",...i};try{let e=window.localStorage.getItem("authToken");e&&!c.Authorization&&(c={...c,Authorization:`Bearer ${e}`})}catch{}let u={method:l,headers:c,signal:n};if(null!=o&&"GET"!==l)if(o instanceof FormData){let{"Content-Type":e,...t}=c;u.headers=c=t,u.body=o}else u.body=JSON.stringify(o);let m=await fetch(d,u),x=await m.text(),y=null;if(x)try{y=JSON.parse(x)}catch{y=x}if(!m.ok)throw new t(m.statusText||"Request failed",m.status,y);return y}function s(e,t){return a(e,{...t,method:"GET"})}function l(e,t,s){return a(e,{...s,method:"POST",body:t})}e.s(["ApiError",()=>t,"get",()=>s,"post",()=>l])},8623,e=>{"use strict";var t=e.i(43476),a=e.i(71645);function s({columns:e,data:s,searchableFields:l=[],actions:r,renderCell:o,footerTotals:i}){let[n,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(null),[m,x]=(0,a.useState)(1),y=s;l.length>0&&(y=s.filter(e=>l.some(t=>String(e[t]).toLowerCase().includes(n.toLowerCase())))),c&&(y=[...y].sort((e,t)=>{let a=e[c.key],s=t[c.key],l=a<s?-1:+(a>s);return"asc"===c.direction?l:-l}));let h=Math.ceil(y.length/10),p=y.slice((m-1)*10,10*m),b=i?y.reduce((e,t)=>(void 0!==t.quantity&&(e.quantity+=t.quantity),void 0!==t.totalSum&&(e.totalSum+=t.totalSum),void 0!==t.amount&&(e.amount+=t.amount),void 0!==t.total&&(e.total+=t.total),void 0!==t.advance&&(e.advance+=t.advance),void 0!==t.remaining&&(e.remaining+=t.remaining),void 0!==t.cost&&(e.cost+=t.cost),void 0!==t.count&&(e.count+=t.count),e),{quantity:0,totalSum:0,amount:0,total:0,advance:0,remaining:0,cost:0,count:y.length}):null;return(0,t.jsxs)("div",{className:"space-y-4",children:[l.length>0&&(0,t.jsx)("div",{className:"flex gap-4",children:(0,t.jsx)("input",{type:"text",placeholder:"Search...",value:n,onChange:e=>{d(e.target.value),x(1)},className:"flex-1 px-4 py-2 border border-slate-200 rounded-lg text-sm text-slate-700 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-[#2563EB]"})}),(0,t.jsx)("div",{className:"overflow-x-auto rounded-2xl border border-slate-100",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-slate-50 border-b border-slate-200",children:[e.map(e=>(0,t.jsx)("th",{className:"px-6 py-3 text-left",children:e.sortable?(0,t.jsxs)("button",{onClick:()=>{var t;return t=e.key,void(u(e=>e?.key===t&&"asc"===e.direction?{key:t,direction:"desc"}:{key:t,direction:"asc"}),x(1))},className:"flex items-center gap-2 font-semibold text-slate-700 hover:text-[#2563EB] transition-colors",children:[e.label,c?.key===e.key&&(0,t.jsx)("span",{children:"asc"===c.direction?"↑":"↓"})]}):(0,t.jsx)("span",{className:"font-semibold text-slate-700",children:e.label})},e.key)),r&&(0,t.jsx)("th",{className:"px-6 py-3 text-left font-semibold text-slate-700",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:p.map((a,s)=>(0,t.jsxs)("tr",{className:"border-b border-slate-100 hover:bg-slate-50 transition-colors",children:[e.map(e=>(0,t.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:o?o(a,e):a[e.key]},e.key)),r&&(0,t.jsx)("td",{className:"px-6 py-4",children:r(a)})]},s))}),b&&(0,t.jsx)("tfoot",{children:(0,t.jsxs)("tr",{className:"bg-slate-50 border-t border-slate-200 font-semibold",children:[e.map(a=>"quantity"===a.key&&void 0!==b.quantity?(0,t.jsxs)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:[new Intl.NumberFormat("ru-RU",{maximumFractionDigits:0}).format(b.quantity)," tonna"]},a.key):"cost"===a.key&&void 0!==b.cost?(0,t.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(b.cost)},a.key):"totalSum"===a.key&&void 0!==b.totalSum?(0,t.jsxs)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:[new Intl.NumberFormat("ru-RU",{maximumFractionDigits:0}).format(b.totalSum)," so'm"]},a.key):"amount"===a.key&&void 0!==b.amount?(0,t.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(b.amount)},a.key):"total"===a.key&&void 0!==b.total?(0,t.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(b.total)},a.key):"advance"===a.key&&void 0!==b.advance?(0,t.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(b.advance)},a.key):"remaining"===a.key&&void 0!==b.remaining?(0,t.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(b.remaining)},a.key):"batchId"===a.key||"id"===a.key?(0,t.jsx)("td",{className:"px-6 py-4 text-slate-900 text-right font-semibold text-sm",children:"Jami:"},a.key):("operator"!==a.key||void 0===b.count||!(b.count>0))&&("producedAt"!==a.key&&"loggedAt"!==a.key&&"payoutDate"!==a.key&&"date"!==a.key||void 0===b.count||!(b.count>0)||e.find(e=>"operator"===e.key))&&("status"!==a.key||void 0===b.count||!(b.count>0)||e.find(e=>"operator"===e.key)||e.find(e=>"producedAt"===e.key||"loggedAt"===e.key||"payoutDate"===e.key||"date"===e.key))&&("transport"!==a.key||void 0===b.count||!(b.count>0)||e.find(e=>"operator"===e.key)||e.find(e=>"producedAt"===e.key||"loggedAt"===e.key||"payoutDate"===e.key||"date"===e.key)||e.find(e=>"status"===e.key))?(0,t.jsx)("td",{className:"px-6 py-4 text-slate-400 text-sm",children:"-"},a.key):(0,t.jsxs)("td",{className:"px-6 py-4 text-slate-900 font-semibold text-sm",children:[new Intl.NumberFormat("ru-RU",{maximumFractionDigits:0}).format(b.count)," ta"]},a.key)),r&&(0,t.jsx)("td",{className:"px-6 py-4"})]})})]})}),h>1&&(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("span",{className:"text-sm text-slate-500",children:["Page ",m," of ",h]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>x(e=>Math.max(1,e-1)),disabled:1===m,className:"px-3 py-1 border border-slate-200 rounded-full text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50",children:"Previous"}),(0,t.jsx)("button",{onClick:()=>x(e=>Math.min(h,e+1)),disabled:m===h,className:"px-3 py-1 border border-slate-200 rounded-full text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50",children:"Next"})]})]})]})}e.s(["DataTable",()=>s])},41368,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(8623),l=e.i(72161);let r=[{key:"id",label:"Hujjat ID",sortable:!0},{key:"product",label:"Mahsulot",sortable:!0},{key:"direction",label:"Yo'nalish",sortable:!0},{key:"quantity",label:"Hajm",sortable:!0},{key:"from",label:"Qayerdan",sortable:!1},{key:"to",label:"Qayerga",sortable:!1},{key:"transport",label:"Transport",sortable:!0},{key:"loggedAt",label:"Sana",sortable:!0}],o=new Intl.NumberFormat("ru-RU",{maximumFractionDigits:0});function i(){let[e,i]=(0,a.useState)({dateFrom:new Date(new Date().getFullYear(),0,1).toISOString().slice(0,10),dateTo:new Date().toISOString().slice(0,10),direction:"all",product:"all"}),[n,d]=(0,a.useState)([]),[c,u]=(0,a.useState)(null),[m,x]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let t=!1;return(async()=>{x(!0),u(null);try{let a=await (0,l.get)("/inventory/flows",{params:{dateFrom:e.dateFrom||void 0,dateTo:e.dateTo||void 0,direction:"all"===e.direction?void 0:e.direction,product:"all"===e.product?void 0:e.product}});if(t)return;let s=Array.isArray(a)?a:a.items??[];d(s)}catch(e){if(t)return;e instanceof l.ApiError?u(e.data&&e.data.message||e.message||"Mahsulot oqimlarini yuklashda xatolik yuz berdi"):u("Mahsulot oqimlarini yuklashda xatolik yuz berdi. Iltimos, qayta urinib ko'ring.")}finally{t||x(!1)}})(),()=>{t=!0}},[e.dateFrom,e.dateTo,e.direction,e.product]);let y=(0,a.useMemo)(()=>n.filter(t=>{let a,s,l,r="all"===e.direction||t.direction===e.direction,o="all"===e.product||t.product===e.product;return r&&o&&(a=new Date(t.loggedAt).getTime(),s=e.dateFrom?new Date(e.dateFrom).getTime():void 0,l=e.dateTo?new Date(e.dateTo).getTime():void 0,("number"!=typeof s||a>=s)&&("number"!=typeof l||a<=l))}),[n,e.direction,e.product,e.dateFrom,e.dateTo]);return y.reduce((e,t)=>("Kirim"===t.direction&&(e.inbound+=t.quantity),"Chiqim"===t.direction&&(e.outbound+=t.quantity),e),{inbound:0,outbound:0}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-[#0F172A]",children:"Mahsulot kirim/chiqimi"}),(0,t.jsx)("p",{className:"text-[#64748B] mt-1",children:"Silos va qadoqlash jarayonidagi barcha harakatlar"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 card-shadow space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-[#0F172A] mb-2 block",children:"Boshlanish sanasi"}),(0,t.jsx)("input",{type:"date",value:e.dateFrom,onChange:e=>i(t=>({...t,dateFrom:e.target.value})),className:"w-full px-3 py-2 border border-[#E2E8F0] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#2563EB]"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-[#0F172A] mb-2 block",children:"Tugash sanasi"}),(0,t.jsx)("input",{type:"date",value:e.dateTo,onChange:e=>i(t=>({...t,dateTo:e.target.value})),className:"w-full px-3 py-2 border border-[#E2E8F0] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#2563EB]"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-[#0F172A] mb-2 block",children:"Yo'nalish"}),(0,t.jsxs)("select",{value:e.direction,onChange:e=>i(t=>({...t,direction:e.target.value})),className:"w-full sm-select",children:[(0,t.jsx)("option",{value:"all",children:"Barchasi"}),(0,t.jsx)("option",{value:"Kirim",children:"Kirim"}),(0,t.jsx)("option",{value:"Chiqim",children:"Chiqim"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-[#0F172A] mb-2 block",children:"Mahsulot"}),(0,t.jsxs)("select",{value:e.product,onChange:e=>i(t=>({...t,product:e.target.value})),className:"w-full sm-select",children:[(0,t.jsx)("option",{value:"all",children:"Barchasi"}),(0,t.jsx)("option",{value:"M400",children:"M400"}),(0,t.jsx)("option",{value:"M500",children:"M500"}),(0,t.jsx)("option",{value:"Sul'fatge chidamli",children:"Sul'fatge chidamli"})]})]})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)("button",{type:"button",onClick:()=>i({dateFrom:"",dateTo:"",direction:"all",product:"all"}),className:"px-4 py-2 border border-[#E2E8F0] rounded-lg text-sm text-[#0F172A] hover:bg-[#F1F5F9]",children:"Filtrlarni tozalash"})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 card-shadow",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-[#0F172A] mb-4",children:"Harakatlar jurnali"}),c&&(0,t.jsx)("p",{className:"mb-4 text-sm text-red-600",children:c}),(0,t.jsx)(s.DataTable,{columns:r,data:y,searchableFields:["id","product","direction","from","to","transport"],renderCell:(e,t)=>"quantity"===t.key?`${o.format(e[t.key])} ${e.unit}`:e[t.key],footerTotals:y.reduce((e,t)=>(e.quantity+=t.quantity,e.count+=1,e),{quantity:0,count:0})})]})]})}e.s(["default",()=>i])}]);