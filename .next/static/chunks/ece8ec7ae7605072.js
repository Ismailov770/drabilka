(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72161,t=>{"use strict";class e extends Error{status;data;constructor(t,e,a=null){super(t),this.name="ApiError",this.status=e,this.data=a}}async function a(t,s={}){let{method:l="GET",params:r,body:o,headers:i,signal:n}=s,c=function(t,e){let a=t.startsWith("http")?t:`http://localhost:8080/api${t}`;if(!e)return a;let s=new URL(a);return Object.entries(e).forEach(([t,e])=>{null!=e&&s.searchParams.append(t,String(e))}),s.toString()}(t,r),d={"Content-Type":"application/json",...i};try{let t=window.localStorage.getItem("authToken");t&&!d.Authorization&&(d={...d,Authorization:`Bearer ${t}`})}catch{}let u={method:l,headers:d,signal:n};if(null!=o&&"GET"!==l)if(o instanceof FormData){let{"Content-Type":t,...e}=d;u.headers=d=e,u.body=o}else u.body=JSON.stringify(o);let m=await fetch(c,u),x=await m.text(),h=null;if(x)try{h=JSON.parse(x)}catch{h=x}if(!m.ok)throw new e(m.statusText||"Request failed",m.status,h);return h}function s(t,e){return a(t,{...e,method:"GET"})}function l(t,e,s){return a(t,{...s,method:"POST",body:e})}t.s(["ApiError",()=>e,"get",()=>s,"post",()=>l])},8623,t=>{"use strict";var e=t.i(43476),a=t.i(71645);function s({columns:t,data:s,searchableFields:l=[],actions:r,renderCell:o,footerTotals:i}){let[n,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(null),[m,x]=(0,a.useState)(1),h=s;l.length>0&&(h=s.filter(t=>l.some(e=>String(t[e]).toLowerCase().includes(n.toLowerCase())))),d&&(h=[...h].sort((t,e)=>{let a=t[d.key],s=e[d.key],l=a<s?-1:+(a>s);return"asc"===d.direction?l:-l}));let y=Math.ceil(h.length/10),p=h.slice((m-1)*10,10*m),b=i?h.reduce((t,e)=>(void 0!==e.quantity&&(t.quantity+=e.quantity),void 0!==e.totalSum&&(t.totalSum+=e.totalSum),void 0!==e.amount&&(t.amount+=e.amount),void 0!==e.total&&(t.total+=e.total),void 0!==e.advance&&(t.advance+=e.advance),void 0!==e.remaining&&(t.remaining+=e.remaining),void 0!==e.cost&&(t.cost+=e.cost),void 0!==e.count&&(t.count+=e.count),t),{quantity:0,totalSum:0,amount:0,total:0,advance:0,remaining:0,cost:0,count:h.length}):null;return(0,e.jsxs)("div",{className:"space-y-4",children:[l.length>0&&(0,e.jsx)("div",{className:"flex gap-4",children:(0,e.jsx)("input",{type:"text",placeholder:"Search...",value:n,onChange:t=>{c(t.target.value),x(1)},className:"flex-1 px-4 py-2 border border-slate-200 rounded-lg text-sm text-slate-700 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-[#2563EB]"})}),(0,e.jsx)("div",{className:"overflow-x-auto rounded-2xl border border-slate-100",children:(0,e.jsxs)("table",{className:"w-full",children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{className:"bg-slate-50 border-b border-slate-200",children:[t.map(t=>(0,e.jsx)("th",{className:"px-6 py-3 text-left",children:t.sortable?(0,e.jsxs)("button",{onClick:()=>{var e;return e=t.key,void(u(t=>t?.key===e&&"asc"===t.direction?{key:e,direction:"desc"}:{key:e,direction:"asc"}),x(1))},className:"flex items-center gap-2 font-semibold text-slate-700 hover:text-[#2563EB] transition-colors",children:[t.label,d?.key===t.key&&(0,e.jsx)("span",{children:"asc"===d.direction?"↑":"↓"})]}):(0,e.jsx)("span",{className:"font-semibold text-slate-700",children:t.label})},t.key)),r&&(0,e.jsx)("th",{className:"px-6 py-3 text-left font-semibold text-slate-700",children:"Actions"})]})}),(0,e.jsx)("tbody",{children:p.map((a,s)=>(0,e.jsxs)("tr",{className:"border-b border-slate-100 hover:bg-slate-50 transition-colors",children:[t.map(t=>(0,e.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:o?o(a,t):a[t.key]},t.key)),r&&(0,e.jsx)("td",{className:"px-6 py-4",children:r(a)})]},s))}),b&&(0,e.jsx)("tfoot",{children:(0,e.jsxs)("tr",{className:"bg-slate-50 border-t border-slate-200 font-semibold",children:[t.map(a=>"quantity"===a.key&&void 0!==b.quantity?(0,e.jsxs)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:[new Intl.NumberFormat("ru-RU",{maximumFractionDigits:0}).format(b.quantity)," tonna"]},a.key):"cost"===a.key&&void 0!==b.cost?(0,e.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(b.cost)},a.key):"totalSum"===a.key&&void 0!==b.totalSum?(0,e.jsxs)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:[new Intl.NumberFormat("ru-RU",{maximumFractionDigits:0}).format(b.totalSum)," so'm"]},a.key):"amount"===a.key&&void 0!==b.amount?(0,e.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(b.amount)},a.key):"total"===a.key&&void 0!==b.total?(0,e.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(b.total)},a.key):"advance"===a.key&&void 0!==b.advance?(0,e.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(b.advance)},a.key):"remaining"===a.key&&void 0!==b.remaining?(0,e.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(b.remaining)},a.key):"batchId"===a.key||"id"===a.key?(0,e.jsx)("td",{className:"px-6 py-4 text-slate-900 text-right font-semibold text-sm",children:"Jami:"},a.key):("operator"!==a.key||void 0===b.count||!(b.count>0))&&("producedAt"!==a.key&&"loggedAt"!==a.key&&"payoutDate"!==a.key&&"date"!==a.key||void 0===b.count||!(b.count>0)||t.find(t=>"operator"===t.key))&&("status"!==a.key||void 0===b.count||!(b.count>0)||t.find(t=>"operator"===t.key)||t.find(t=>"producedAt"===t.key||"loggedAt"===t.key||"payoutDate"===t.key||"date"===t.key))&&("transport"!==a.key||void 0===b.count||!(b.count>0)||t.find(t=>"operator"===t.key)||t.find(t=>"producedAt"===t.key||"loggedAt"===t.key||"payoutDate"===t.key||"date"===t.key)||t.find(t=>"status"===t.key))?(0,e.jsx)("td",{className:"px-6 py-4 text-slate-400 text-sm",children:"-"},a.key):(0,e.jsxs)("td",{className:"px-6 py-4 text-slate-900 font-semibold text-sm",children:[new Intl.NumberFormat("ru-RU",{maximumFractionDigits:0}).format(b.count)," ta"]},a.key)),r&&(0,e.jsx)("td",{className:"px-6 py-4"})]})})]})}),y>1&&(0,e.jsxs)("div",{className:"flex justify-between items-center",children:[(0,e.jsxs)("span",{className:"text-sm text-slate-500",children:["Page ",m," of ",y]}),(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsx)("button",{onClick:()=>x(t=>Math.max(1,t-1)),disabled:1===m,className:"px-3 py-1 border border-slate-200 rounded-full text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50",children:"Previous"}),(0,e.jsx)("button",{onClick:()=>x(t=>Math.min(y,t+1)),disabled:m===y,className:"px-3 py-1 border border-slate-200 rounded-full text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50",children:"Next"})]})]})]})}t.s(["DataTable",()=>s])},82289,t=>{"use strict";var e=t.i(43476),a=t.i(71645),s=t.i(8623),l=t.i(72161);let r=[{key:"batchId",label:"Batch ID",sortable:!0},{key:"product",label:"Mahsulot",sortable:!0},{key:"shift",label:"Smena",sortable:!0},{key:"line",label:"Press liniyasi",sortable:!0},{key:"quantity",label:"Hajm",sortable:!0},{key:"price",label:"Narxi",sortable:!0},{key:"totalSum",label:"Umumiy Summa",sortable:!0},{key:"transport",label:"Transport",sortable:!0},{key:"operator",label:"Mas'ul operator",sortable:!0},{key:"producedAt",label:"Berilgan sana",sortable:!0}],o=new Intl.NumberFormat("ru-RU",{maximumFractionDigits:0}),i=new Date,n=i.getFullYear(),c=`${n}-01-01`,d=i.toISOString().slice(0,10);function u(){let[t,i]=(0,a.useState)({dateFrom:c,dateTo:d,product:"all",shift:"all"}),[n,u]=(0,a.useState)([]),[m,x]=(0,a.useState)(null),[h,y]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=!1;return(async()=>{y(!0),x(null);try{let a=await (0,l.get)("/production/batches",{params:{dateFrom:t.dateFrom||void 0,dateTo:t.dateTo||void 0,product:"all"===t.product?void 0:t.product,shift:"all"===t.shift?void 0:t.shift}});if(e)return;let s=Array.isArray(a)?a:a.items??[];u(s)}catch(t){if(e)return;t instanceof l.ApiError?x(t.data&&t.data.message||t.message||"Ishlab chiqarish batchlarini yuklashda xatolik yuz berdi"):x("Ishlab chiqarish batchlarini yuklashda xatolik yuz berdi. Iltimos, qayta urinib ko'ring.")}finally{e||y(!1)}})(),()=>{e=!0}},[t.dateFrom,t.dateTo,t.product,t.shift]);let p=(0,a.useMemo)(()=>n.filter(e=>{let a,s,l,r="all"===t.product||e.product===t.product,o="all"===t.shift||e.shift===t.shift;return r&&o&&(a=new Date(e.producedAt).getTime(),s=t.dateFrom?new Date(t.dateFrom).getTime():void 0,l=t.dateTo?new Date(t.dateTo).getTime():void 0,("number"!=typeof s||a>=s)&&("number"!=typeof l||a<=l))}).map(t=>({...t,totalSum:t.quantity*t.price})),[n,t.product,t.shift,t.dateFrom,t.dateTo]);return p.reduce((t,e)=>(t.quantity+=e.quantity,t.batches+=1,t),{quantity:0,batches:0}),(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("h1",{className:"text-3xl font-bold text-[#0F172A]",children:"Chiqarilgan mahsulotlar"}),(0,e.jsx)("p",{className:"text-[#64748B] mt-1",children:"Smena va mahsulot bo'yicha real vaqt rejimidagi nazorat"})]}),(0,e.jsxs)("div",{className:"bg-white rounded-lg p-6 card-shadow space-y-4",children:[(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"text-sm font-semibold text-[#0F172A] mb-2 block",children:"Boshlanish sanasi"}),(0,e.jsx)("input",{type:"date",value:t.dateFrom,onChange:t=>i(e=>({...e,dateFrom:t.target.value})),className:"w-full px-3 py-2 border border-[#E2E8F0] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#2563EB]"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"text-sm font-semibold text-[#0F172A] mb-2 block",children:"Tugash sanasi"}),(0,e.jsx)("input",{type:"date",value:t.dateTo,onChange:t=>i(e=>({...e,dateTo:t.target.value})),className:"w-full px-3 py-2 border border-[#E2E8F0] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#2563EB]"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"text-sm font-semibold text-[#0F172A] mb-2 block",children:"Mahsulot turi"}),(0,e.jsxs)("select",{value:t.product,onChange:t=>i(e=>({...e,product:t.target.value})),className:"w-full sm-select",children:[(0,e.jsx)("option",{value:"all",children:"Barchasi"}),(0,e.jsx)("option",{value:"M400",children:"M400"}),(0,e.jsx)("option",{value:"M500",children:"M500"}),(0,e.jsx)("option",{value:"Sul'fatge chidamli",children:"Sul'fatge chidamli"})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"text-sm font-semibold text-[#0F172A] mb-2 block",children:"Smena"}),(0,e.jsxs)("select",{value:t.shift,onChange:t=>i(e=>({...e,shift:t.target.value})),className:"w-full sm-select",children:[(0,e.jsx)("option",{value:"all",children:"Barchasi"}),(0,e.jsx)("option",{value:"Tonggi",children:"Tonggi"}),(0,e.jsx)("option",{value:"Kunduzgi",children:"Kunduzgi"}),(0,e.jsx)("option",{value:"Kechgi",children:"Kechgi"})]})]})]}),(0,e.jsx)("div",{className:"flex justify-end",children:(0,e.jsx)("button",{type:"button",onClick:()=>i({dateFrom:"",dateTo:"",product:"all",shift:"all"}),className:"px-4 py-2 border border-[#E2E8F0] rounded-lg text-sm text-[#0F172A] hover:bg-[#F1F5F9] mt-2",children:"Filtrlarni tozalash"})})]}),(0,e.jsxs)("div",{className:"bg-white rounded-lg p-6 card-shadow",children:[(0,e.jsx)("h2",{className:"text-lg font-semibold text-[#0F172A] mb-4",children:"Batchlar bo'yicha tafsilot"}),m&&(0,e.jsx)("p",{className:"mb-4 text-sm text-red-600",children:m}),(0,e.jsx)(s.DataTable,{columns:r,data:p,searchableFields:["batchId","product","shift","line","operator","transport"],renderCell:(t,e)=>"quantity"===e.key?`${o.format(t[e.key])} ${t.unit}`:"price"===e.key||"totalSum"===e.key?`${o.format(t[e.key])} so'm`:t[e.key],footerTotals:p.reduce((t,e)=>(t.quantity+=e.quantity,t.totalSum+=e.totalSum,t.count+=1,t),{quantity:0,totalSum:0,count:0})})]})]})}t.s(["default",()=>u])}]);