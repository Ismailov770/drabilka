(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72161,t=>{"use strict";class e extends Error{status;data;constructor(t,e,a=null){super(t),this.name="ApiError",this.status=e,this.data=a}}async function a(t,s={}){let{method:r="GET",params:l,body:o,headers:n,signal:i}=s,d=function(t,e){let a=t.startsWith("http")?t:`http://localhost:8080/api${t}`;if(!e)return a;let s=new URL(a);return Object.entries(e).forEach(([t,e])=>{null!=e&&s.searchParams.append(t,String(e))}),s.toString()}(t,l),c={"Content-Type":"application/json",...n};try{let t=window.localStorage.getItem("authToken");t&&!c.Authorization&&(c={...c,Authorization:`Bearer ${t}`})}catch{}let u={method:r,headers:c,signal:i};if(null!=o&&"GET"!==r)if(o instanceof FormData){let{"Content-Type":t,...e}=c;u.headers=c=e,u.body=o}else u.body=JSON.stringify(o);let m=await fetch(d,u),x=await m.text(),y=null;if(x)try{y=JSON.parse(x)}catch{y=x}if(!m.ok)throw new e(m.statusText||"Request failed",m.status,y);return y}function s(t,e){return a(t,{...e,method:"GET"})}function r(t,e,s){return a(t,{...s,method:"POST",body:e})}t.s(["ApiError",()=>e,"get",()=>s,"post",()=>r])},8623,t=>{"use strict";var e=t.i(43476),a=t.i(71645);function s({columns:t,data:s,searchableFields:r=[],actions:l,renderCell:o,footerTotals:n}){let[i,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(null),[m,x]=(0,a.useState)(1),y=s;r.length>0&&(y=s.filter(t=>r.some(e=>String(t[e]).toLowerCase().includes(i.toLowerCase())))),c&&(y=[...y].sort((t,e)=>{let a=t[c.key],s=e[c.key],r=a<s?-1:+(a>s);return"asc"===c.direction?r:-r}));let h=Math.ceil(y.length/10),p=y.slice((m-1)*10,10*m),g=n?y.reduce((t,e)=>(void 0!==e.quantity&&(t.quantity+=e.quantity),void 0!==e.totalSum&&(t.totalSum+=e.totalSum),void 0!==e.amount&&(t.amount+=e.amount),void 0!==e.total&&(t.total+=e.total),void 0!==e.advance&&(t.advance+=e.advance),void 0!==e.remaining&&(t.remaining+=e.remaining),void 0!==e.cost&&(t.cost+=e.cost),void 0!==e.count&&(t.count+=e.count),t),{quantity:0,totalSum:0,amount:0,total:0,advance:0,remaining:0,cost:0,count:y.length}):null;return(0,e.jsxs)("div",{className:"space-y-4",children:[r.length>0&&(0,e.jsx)("div",{className:"flex gap-4",children:(0,e.jsx)("input",{type:"text",placeholder:"Search...",value:i,onChange:t=>{d(t.target.value),x(1)},className:"flex-1 px-4 py-2 border border-slate-200 rounded-lg text-sm text-slate-700 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-[#2563EB]"})}),(0,e.jsx)("div",{className:"overflow-x-auto rounded-2xl border border-slate-100",children:(0,e.jsxs)("table",{className:"w-full",children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{className:"bg-slate-50 border-b border-slate-200",children:[t.map(t=>(0,e.jsx)("th",{className:"px-6 py-3 text-left",children:t.sortable?(0,e.jsxs)("button",{onClick:()=>{var e;return e=t.key,void(u(t=>t?.key===e&&"asc"===t.direction?{key:e,direction:"desc"}:{key:e,direction:"asc"}),x(1))},className:"flex items-center gap-2 font-semibold text-slate-700 hover:text-[#2563EB] transition-colors",children:[t.label,c?.key===t.key&&(0,e.jsx)("span",{children:"asc"===c.direction?"↑":"↓"})]}):(0,e.jsx)("span",{className:"font-semibold text-slate-700",children:t.label})},t.key)),l&&(0,e.jsx)("th",{className:"px-6 py-3 text-left font-semibold text-slate-700",children:"Actions"})]})}),(0,e.jsx)("tbody",{children:p.map((a,s)=>(0,e.jsxs)("tr",{className:"border-b border-slate-100 hover:bg-slate-50 transition-colors",children:[t.map(t=>(0,e.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:o?o(a,t):a[t.key]},t.key)),l&&(0,e.jsx)("td",{className:"px-6 py-4",children:l(a)})]},s))}),g&&(0,e.jsx)("tfoot",{children:(0,e.jsxs)("tr",{className:"bg-slate-50 border-t border-slate-200 font-semibold",children:[t.map(a=>"quantity"===a.key&&void 0!==g.quantity?(0,e.jsxs)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:[new Intl.NumberFormat("ru-RU",{maximumFractionDigits:0}).format(g.quantity)," tonna"]},a.key):"cost"===a.key&&void 0!==g.cost?(0,e.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(g.cost)},a.key):"totalSum"===a.key&&void 0!==g.totalSum?(0,e.jsxs)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:[new Intl.NumberFormat("ru-RU",{maximumFractionDigits:0}).format(g.totalSum)," so'm"]},a.key):"amount"===a.key&&void 0!==g.amount?(0,e.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(g.amount)},a.key):"total"===a.key&&void 0!==g.total?(0,e.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(g.total)},a.key):"advance"===a.key&&void 0!==g.advance?(0,e.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(g.advance)},a.key):"remaining"===a.key&&void 0!==g.remaining?(0,e.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(g.remaining)},a.key):"batchId"===a.key||"id"===a.key?(0,e.jsx)("td",{className:"px-6 py-4 text-slate-900 text-right font-semibold text-sm",children:"Jami:"},a.key):("operator"!==a.key||void 0===g.count||!(g.count>0))&&("producedAt"!==a.key&&"loggedAt"!==a.key&&"payoutDate"!==a.key&&"date"!==a.key||void 0===g.count||!(g.count>0)||t.find(t=>"operator"===t.key))&&("status"!==a.key||void 0===g.count||!(g.count>0)||t.find(t=>"operator"===t.key)||t.find(t=>"producedAt"===t.key||"loggedAt"===t.key||"payoutDate"===t.key||"date"===t.key))&&("transport"!==a.key||void 0===g.count||!(g.count>0)||t.find(t=>"operator"===t.key)||t.find(t=>"producedAt"===t.key||"loggedAt"===t.key||"payoutDate"===t.key||"date"===t.key)||t.find(t=>"status"===t.key))?(0,e.jsx)("td",{className:"px-6 py-4 text-slate-400 text-sm",children:"-"},a.key):(0,e.jsxs)("td",{className:"px-6 py-4 text-slate-900 font-semibold text-sm",children:[new Intl.NumberFormat("ru-RU",{maximumFractionDigits:0}).format(g.count)," ta"]},a.key)),l&&(0,e.jsx)("td",{className:"px-6 py-4"})]})})]})}),h>1&&(0,e.jsxs)("div",{className:"flex justify-between items-center",children:[(0,e.jsxs)("span",{className:"text-sm text-slate-500",children:["Page ",m," of ",h]}),(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsx)("button",{onClick:()=>x(t=>Math.max(1,t-1)),disabled:1===m,className:"px-3 py-1 border border-slate-200 rounded-full text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50",children:"Previous"}),(0,e.jsx)("button",{onClick:()=>x(t=>Math.min(h,t+1)),disabled:m===h,className:"px-3 py-1 border border-slate-200 rounded-full text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50",children:"Next"})]})]})]})}t.s(["DataTable",()=>s])},12109,81262,t=>{"use strict";var e=t.i(43476);let a={blue:"from-[#2563EB] to-[#4F46E5] text-white",green:"from-[#22C55E] to-[#16A34A] text-white",orange:"from-[#FDBA74] to-[#FB923C] text-[#7C2D12]",red:"from-[#FCA5A5] to-[#F97373] text-[#7F1D1D]",purple:"from-[#C4B5FD] to-[#A855F7] text-white"};function s({label:t,value:s,icon:r,trend:l,color:o="blue"}){return(0,e.jsx)("div",{className:"bg-white rounded-2xl p-6 card-shadow-lg border border-slate-100 flex flex-col justify-between",children:(0,e.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:t}),(0,e.jsx)("p",{className:"text-3xl md:text-4xl font-semibold text-slate-900",children:s}),l&&(0,e.jsxs)("p",{className:`text-xs mt-1 md:text-sm ${l.isPositive?"text-emerald-500":"text-rose-500"}`,children:[l.isPositive?"▲":"▼"," ",Math.abs(l.value),"% from last month"]})]}),(0,e.jsx)("div",{className:`inline-flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-gradient-to-br ${a[o]} shadow-md`,children:r})]})})}t.s(["StatCard",()=>s],12109);let r=(0,t.i(75254).default)("Hourglass",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]]);t.s(["Hourglass",()=>r],81262)},94757,t=>{"use strict";var e=t.i(43476),a=t.i(71645),s=t.i(12109),r=t.i(8623),l=t.i(61659),o=t.i(81262),n=t.i(72161);function i(){let[t,i]=(0,a.useState)([]),[d,c]=(0,a.useState)(null),[u,m]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let t=!1;return(async()=>{m(!0),c(null);try{let e=await (0,n.get)("/debts");if(t)return;let a=Array.isArray(e)?e:e.items??[];i(a)}catch(e){if(t)return;e instanceof n.ApiError?c(e.data&&e.data.message||e.message||"Qarzlarni yuklashda xatolik yuz berdi"):c("Qarzlarni yuklashda xatolik yuz berdi. Iltimos, qayta urinib ko'ring.")}finally{t||m(!1)}})(),()=>{t=!0}},[]);let x=(0,a.useMemo)(()=>{let e=new Map;for(let a of t){let t=e.get(a.company)||{totalDue:0,outstanding:0,count:0};t.totalDue+=a.amountDue,t.outstanding+=a.outstanding,t.count+=1,e.set(a.company,t)}return Array.from(e.entries()).map(([t,e])=>({company:t,...e}))},[t]),y=(0,a.useMemo)(()=>({totalAmount:t.reduce((t,e)=>t+e.amountDue,0),totalOutstanding:t.reduce((t,e)=>t+e.outstanding,0)}),[t]);return(0,e.jsxs)("div",{className:"space-y-8",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("h1",{className:"text-3xl font-semibold text-slate-900",children:"Owner — Debts Overview"}),(0,e.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Aggregated view of credits and outstanding balances by company."})]}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,e.jsx)(s.StatCard,{label:"Total owed",value:`$${y.totalAmount.toLocaleString()}`,icon:(0,e.jsx)(l.CreditCard,{className:"w-5 h-5"}),color:"orange"}),(0,e.jsx)(s.StatCard,{label:"Outstanding",value:`$${y.totalOutstanding.toLocaleString()}`,icon:(0,e.jsx)(o.Hourglass,{className:"w-5 h-5"}),color:"red"})]}),(0,e.jsxs)("div",{className:"bg-white rounded-2xl p-6 card-shadow-lg border border-slate-100",children:[(0,e.jsxs)("div",{className:"flex flex-col gap-1 mb-4",children:[(0,e.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"By Company"}),(0,e.jsx)("p",{className:"text-sm text-slate-500",children:"Grouped view of debts by client company."})]}),(0,e.jsx)(r.DataTable,{columns:[{key:"company",label:"Company"},{key:"count",label:"Count"},{key:"totalDue",label:"Total Due"},{key:"outstanding",label:"Outstanding"}],data:x.map(t=>({company:t.company,count:t.count,totalDue:`$${t.totalDue.toLocaleString()}`,outstanding:`$${t.outstanding.toLocaleString()}`}))})]})]})}t.s(["default",()=>i])}]);