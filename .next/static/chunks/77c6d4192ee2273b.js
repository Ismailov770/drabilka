(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,91288,e=>{"use strict";var t=e.i(43476);let a=(0,e.i(75254).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),s={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg"};function l({isOpen:e,title:l,onClose:r,children:i,size:n="md"}){return e?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-8 bg-slate-950/60 backdrop-blur-sm sm-animate-overlay-in",children:(0,t.jsxs)("div",{className:`w-full ${s[n]} bg-white rounded-2xl border border-slate-200/80 card-shadow-lg overflow-hidden max-h-[90vh] flex flex-col sm-animate-modal-in`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-200/80",children:[(0,t.jsx)("h2",{className:"text-base md:text-lg font-semibold text-slate-900",children:l}),(0,t.jsx)("button",{onClick:r,className:"inline-flex h-8 w-8 items-center justify-center rounded-full text-slate-400 hover:text-slate-900 hover:bg-slate-100 transition-colors",children:(0,t.jsx)(a,{className:"w-4 h-4"})})]}),(0,t.jsx)("div",{className:"px-6 py-5 overflow-y-auto",children:i})]})}):null}e.s(["Modal",()=>l],91288)},72161,e=>{"use strict";class t extends Error{status;data;constructor(e,t,a=null){super(e),this.name="ApiError",this.status=t,this.data=a}}async function a(e,s={}){let{method:l="GET",params:r,body:i,headers:n,signal:o}=s,d=function(e,t){let a=e.startsWith("http")?e:`http://localhost:8080/api${e}`;if(!t)return a;let s=new URL(a);return Object.entries(t).forEach(([e,t])=>{null!=t&&s.searchParams.append(e,String(t))}),s.toString()}(e,r),c={"Content-Type":"application/json",...n};try{let e=window.localStorage.getItem("authToken");e&&!c.Authorization&&(c={...c,Authorization:`Bearer ${e}`})}catch{}let m={method:l,headers:c,signal:o};if(null!=i&&"GET"!==l)if(i instanceof FormData){let{"Content-Type":e,...t}=c;m.headers=c=t,m.body=i}else m.body=JSON.stringify(i);let u=await fetch(d,m),x=await u.text(),h=null;if(x)try{h=JSON.parse(x)}catch{h=x}if(!u.ok)throw new t(u.statusText||"Request failed",u.status,h);return h}function s(e,t){return a(e,{...t,method:"GET"})}function l(e,t,s){return a(e,{...s,method:"POST",body:t})}e.s(["ApiError",()=>t,"get",()=>s,"post",()=>l])},8623,e=>{"use strict";var t=e.i(43476),a=e.i(71645);function s({columns:e,data:s,searchableFields:l=[],actions:r,renderCell:i,footerTotals:n}){let[o,d]=(0,a.useState)(""),[c,m]=(0,a.useState)(null),[u,x]=(0,a.useState)(1),h=s;l.length>0&&(h=s.filter(e=>l.some(t=>String(e[t]).toLowerCase().includes(o.toLowerCase())))),c&&(h=[...h].sort((e,t)=>{let a=e[c.key],s=t[c.key],l=a<s?-1:+(a>s);return"asc"===c.direction?l:-l}));let y=Math.ceil(h.length/10),p=h.slice((u-1)*10,10*u),b=n?h.reduce((e,t)=>(void 0!==t.quantity&&(e.quantity+=t.quantity),void 0!==t.totalSum&&(e.totalSum+=t.totalSum),void 0!==t.amount&&(e.amount+=t.amount),void 0!==t.total&&(e.total+=t.total),void 0!==t.advance&&(e.advance+=t.advance),void 0!==t.remaining&&(e.remaining+=t.remaining),void 0!==t.cost&&(e.cost+=t.cost),void 0!==t.count&&(e.count+=t.count),e),{quantity:0,totalSum:0,amount:0,total:0,advance:0,remaining:0,cost:0,count:h.length}):null;return(0,t.jsxs)("div",{className:"space-y-4",children:[l.length>0&&(0,t.jsx)("div",{className:"flex gap-4",children:(0,t.jsx)("input",{type:"text",placeholder:"Search...",value:o,onChange:e=>{d(e.target.value),x(1)},className:"flex-1 px-4 py-2 border border-slate-200 rounded-lg text-sm text-slate-700 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-[#2563EB]"})}),(0,t.jsx)("div",{className:"overflow-x-auto rounded-2xl border border-slate-100",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-slate-50 border-b border-slate-200",children:[e.map(e=>(0,t.jsx)("th",{className:"px-6 py-3 text-left",children:e.sortable?(0,t.jsxs)("button",{onClick:()=>{var t;return t=e.key,void(m(e=>e?.key===t&&"asc"===e.direction?{key:t,direction:"desc"}:{key:t,direction:"asc"}),x(1))},className:"flex items-center gap-2 font-semibold text-slate-700 hover:text-[#2563EB] transition-colors",children:[e.label,c?.key===e.key&&(0,t.jsx)("span",{children:"asc"===c.direction?"↑":"↓"})]}):(0,t.jsx)("span",{className:"font-semibold text-slate-700",children:e.label})},e.key)),r&&(0,t.jsx)("th",{className:"px-6 py-3 text-left font-semibold text-slate-700",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:p.map((a,s)=>(0,t.jsxs)("tr",{className:"border-b border-slate-100 hover:bg-slate-50 transition-colors",children:[e.map(e=>(0,t.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:i?i(a,e):a[e.key]},e.key)),r&&(0,t.jsx)("td",{className:"px-6 py-4",children:r(a)})]},s))}),b&&(0,t.jsx)("tfoot",{children:(0,t.jsxs)("tr",{className:"bg-slate-50 border-t border-slate-200 font-semibold",children:[e.map(a=>"quantity"===a.key&&void 0!==b.quantity?(0,t.jsxs)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:[new Intl.NumberFormat("ru-RU",{maximumFractionDigits:0}).format(b.quantity)," tonna"]},a.key):"cost"===a.key&&void 0!==b.cost?(0,t.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(b.cost)},a.key):"totalSum"===a.key&&void 0!==b.totalSum?(0,t.jsxs)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:[new Intl.NumberFormat("ru-RU",{maximumFractionDigits:0}).format(b.totalSum)," so'm"]},a.key):"amount"===a.key&&void 0!==b.amount?(0,t.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(b.amount)},a.key):"total"===a.key&&void 0!==b.total?(0,t.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(b.total)},a.key):"advance"===a.key&&void 0!==b.advance?(0,t.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(b.advance)},a.key):"remaining"===a.key&&void 0!==b.remaining?(0,t.jsx)("td",{className:"px-6 py-4 text-slate-900 text-sm",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(b.remaining)},a.key):"batchId"===a.key||"id"===a.key?(0,t.jsx)("td",{className:"px-6 py-4 text-slate-900 text-right font-semibold text-sm",children:"Jami:"},a.key):("operator"!==a.key||void 0===b.count||!(b.count>0))&&("producedAt"!==a.key&&"loggedAt"!==a.key&&"payoutDate"!==a.key&&"date"!==a.key||void 0===b.count||!(b.count>0)||e.find(e=>"operator"===e.key))&&("status"!==a.key||void 0===b.count||!(b.count>0)||e.find(e=>"operator"===e.key)||e.find(e=>"producedAt"===e.key||"loggedAt"===e.key||"payoutDate"===e.key||"date"===e.key))&&("transport"!==a.key||void 0===b.count||!(b.count>0)||e.find(e=>"operator"===e.key)||e.find(e=>"producedAt"===e.key||"loggedAt"===e.key||"payoutDate"===e.key||"date"===e.key)||e.find(e=>"status"===e.key))?(0,t.jsx)("td",{className:"px-6 py-4 text-slate-400 text-sm",children:"-"},a.key):(0,t.jsxs)("td",{className:"px-6 py-4 text-slate-900 font-semibold text-sm",children:[new Intl.NumberFormat("ru-RU",{maximumFractionDigits:0}).format(b.count)," ta"]},a.key)),r&&(0,t.jsx)("td",{className:"px-6 py-4"})]})})]})}),y>1&&(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("span",{className:"text-sm text-slate-500",children:["Page ",u," of ",y]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>x(e=>Math.max(1,e-1)),disabled:1===u,className:"px-3 py-1 border border-slate-200 rounded-full text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50",children:"Previous"}),(0,t.jsx)("button",{onClick:()=>x(e=>Math.min(y,e+1)),disabled:u===y,className:"px-3 py-1 border border-slate-200 rounded-full text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50",children:"Next"})]})]})]})}e.s(["DataTable",()=>s])},77952,e=>{"use strict";var t=e.i(43476);let a={primary:"bg-gradient-to-r from-[#2563EB] to-[#4F46E5] text-white shadow-md hover:shadow-lg hover:brightness-110",secondary:"bg-white text-[#0F172A] border border-[#E2E8F0] hover:bg-[#F1F5F9] hover:border-[#CBD5E1]",danger:"bg-[#EF4444] text-white hover:bg-[#DC2626] shadow-sm",outline:"bg-transparent text-[#0F172A] border border-[#E2E8F0] hover:bg-[#F8FAFC] hover:border-[#CBD5E1]",ghost:"bg-transparent text-[#0F172A] hover:bg-[#F1F5F9]"},s={sm:"px-3 py-1.5 text-xs md:text-sm",md:"px-4 py-2 text-sm md:text-base",lg:"px-6 py-3 text-base md:text-lg"};function l({variant:e="primary",size:l="md",children:r,disabled:i,className:n="",...o}){return(0,t.jsx)("button",{className:`inline-flex items-center justify-center gap-2 rounded-full font-semibold transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[#2563EB] focus-visible:ring-offset-[#F8FAFC] ${a[e]} ${s[l]} ${n}`,disabled:i,...o,children:r})}e.s(["Button",()=>l])},12109,81262,e=>{"use strict";var t=e.i(43476);let a={blue:"from-[#2563EB] to-[#4F46E5] text-white",green:"from-[#22C55E] to-[#16A34A] text-white",orange:"from-[#FDBA74] to-[#FB923C] text-[#7C2D12]",red:"from-[#FCA5A5] to-[#F97373] text-[#7F1D1D]",purple:"from-[#C4B5FD] to-[#A855F7] text-white"};function s({label:e,value:s,icon:l,trend:r,color:i="blue"}){return(0,t.jsx)("div",{className:"bg-white rounded-2xl p-6 card-shadow-lg border border-slate-100 flex flex-col justify-between",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:e}),(0,t.jsx)("p",{className:"text-3xl md:text-4xl font-semibold text-slate-900",children:s}),r&&(0,t.jsxs)("p",{className:`text-xs mt-1 md:text-sm ${r.isPositive?"text-emerald-500":"text-rose-500"}`,children:[r.isPositive?"▲":"▼"," ",Math.abs(r.value),"% from last month"]})]}),(0,t.jsx)("div",{className:`inline-flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-gradient-to-br ${a[i]} shadow-md`,children:l})]})})}e.s(["StatCard",()=>s],12109);let l=(0,e.i(75254).default)("Hourglass",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]]);e.s(["Hourglass",()=>l],81262)},43849,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(8623),l=e.i(77952),r=e.i(91288),i=e.i(12109);let n=(0,e.i(75254).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var o=e.i(61659),d=e.i(81262),c=e.i(72161);function m(){let[e,m]=(0,a.useState)([]),u=(0,a.useMemo)(()=>Array.from(new Set(e.map(e=>e.company))),[e]),[x,h]=(0,a.useState)("all"),[y,p]=(0,a.useState)("all"),[b,f]=(0,a.useState)(!1),[g,v]=(0,a.useState)(null),[j,k]=(0,a.useState)(""),[N,w]=(0,a.useState)("Cash"),[C,S]=(0,a.useState)(!1),[F,A]=(0,a.useState)(null),[D,E]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=!1;return(async()=>{A(null);try{let t=await (0,c.get)("/debts");if(e)return;let a=Array.isArray(t)?t:t.items??[];m(a)}catch(t){if(e)return;t instanceof c.ApiError?A(t.data&&t.data.message||t.message||"Qarzlarni yuklashda xatolik yuz berdi"):A("Qarzlarni yuklashda xatolik yuz berdi. Iltimos, qayta urinib ko'ring.")}})(),()=>{e=!0}},[]);let T=(0,a.useMemo)(()=>{let t=e.reduce((e,t)=>e+t.amountDue,0),a=e.reduce((e,t)=>e+t.outstanding,0);return{totalAmount:t,totalOutstanding:a,paid:t-a}},[e]),$=async()=>{if(!g||""===j)return;let e=Number(j);S(!0),E(null);try{let t={amount:e,type:N,at:new Date().toISOString()},a=await (0,c.post)(`/debts/${g.id}/payments`,t),s=a.debt??a;m(e=>e.map(e=>e.id===s.id?s:e)),f(!1),v(null),k("")}catch(e){e instanceof c.ApiError?E(e.data&&e.data.message||e.message||"To'lovni yozishda xatolik yuz berdi"):E("To'lovni yozishda xatolik yuz berdi. Iltimos, qayta urinib ko'ring.")}finally{S(!1)}},B=e.filter(e=>("all"===x||e.company===x)&&("all"===y||e.status===y));return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-semibold text-slate-900",children:"Debts / Qarzlar"}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"View and manage outstanding credits / debts."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)(i.StatCard,{label:"Total owed",value:`$${T.totalAmount.toLocaleString()}`,icon:(0,t.jsx)(o.CreditCard,{className:"w-5 h-5"}),color:"orange"}),(0,t.jsx)(i.StatCard,{label:"Outstanding",value:`$${T.totalOutstanding.toLocaleString()}`,icon:(0,t.jsx)(d.Hourglass,{className:"w-5 h-5"}),color:"red"}),(0,t.jsx)(i.StatCard,{label:"Paid",value:`$${T.paid.toLocaleString()}`,icon:(0,t.jsx)(n,{className:"w-5 h-5"}),color:"green"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 card-shadow-lg border border-slate-100",children:[(0,t.jsx)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between mb-4",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,t.jsxs)("select",{value:x,onChange:e=>h(e.target.value),className:"sm-select text-sm",children:[(0,t.jsx)("option",{value:"all",children:"All companies"}),u.map((e,a)=>(0,t.jsx)("option",{value:e,children:e},a))]}),(0,t.jsxs)("select",{value:y,onChange:e=>p(e.target.value),className:"sm-select text-sm",children:[(0,t.jsx)("option",{value:"all",children:"All statuses"}),(0,t.jsx)("option",{value:"Open",children:"Open"}),(0,t.jsx)("option",{value:"Partial",children:"Partial"}),(0,t.jsx)("option",{value:"Paid",children:"Paid"})]})]})}),F&&(0,t.jsx)("p",{className:"mb-4 text-sm text-red-600",children:F}),(0,t.jsx)(s.DataTable,{columns:[{key:"id",label:"ID",sortable:!0},{key:"company",label:"Company / Client",sortable:!0},{key:"saleId",label:"Sale / Invoice",sortable:!0},{key:"amountDue",label:"Amount Due ($)",sortable:!0},{key:"outstanding",label:"Outstanding ($)",sortable:!0},{key:"dueDate",label:"Due Date",sortable:!0},{key:"status",label:"Status",sortable:!0}],data:B,searchableFields:["id","company","saleId","notes"],actions:e=>(0,t.jsx)(l.Button,{variant:"outline",size:"sm",onClick:()=>{v(e),k(""),w("Cash"),E(null),f(!0)},children:"Record Payment"})})]}),(0,t.jsx)(r.Modal,{title:g?`Record Payment - ${g.id}`:"Record Payment",isOpen:b,onClose:()=>f(!1),size:"sm",children:g&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-slate-500",children:"Company"}),(0,t.jsx)("div",{className:"font-semibold",children:g.company})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-slate-500",children:"Outstanding"}),(0,t.jsxs)("div",{className:"font-semibold text-red-700",children:["$",g.outstanding]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-700 mb-1",children:"Amount to pay ($)"}),(0,t.jsx)("input",{type:"number",value:j,onChange:e=>k(""===e.target.value?"":Number(e.target.value)),className:"w-full px-3 py-2 border rounded-lg"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-700 mb-1",children:"Payment Type"}),(0,t.jsxs)("select",{value:N,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border rounded-lg",children:[(0,t.jsx)("option",{value:"Cash",children:"Cash"}),(0,t.jsx)("option",{value:"Transfer",children:"Bank Transfer"}),(0,t.jsx)("option",{value:"Credit",children:"Credit"})]})]}),D&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:D}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(l.Button,{variant:"primary",onClick:$,className:"w-full",children:"Record Payment"}),(0,t.jsx)(l.Button,{variant:"outline",onClick:()=>f(!1),className:"w-full",children:"Cancel"})]})]})})]})}e.s(["default",()=>m],43849)}]);