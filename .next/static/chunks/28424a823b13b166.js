(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75254,e=>{"use strict";var t=e.i(71645);let r=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,t.forwardRef)(({color:e="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:n="",children:o,iconNode:d,...u},c)=>(0,t.createElement)("svg",{ref:c,...a,width:s,height:s,stroke:e,strokeWidth:l?24*Number(i)/Number(s):i,className:r("lucide",n),...u},[...d.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(o)?o:[o]])),i=(e,a)=>{let i=(0,t.forwardRef)(({className:i,...l},n)=>(0,t.createElement)(s,{ref:n,iconNode:a,className:r(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,i),...l}));return i.displayName=`${e}`,i};e.s(["default",()=>i],75254)},72161,e=>{"use strict";class t extends Error{status;data;constructor(e,t,r=null){super(e),this.name="ApiError",this.status=t,this.data=r}}async function r(e,a={}){let{method:s="GET",params:i,body:l,headers:n,signal:o}=a,d=function(e,t){let r=e.startsWith("http")?e:`http://localhost:8080/api${e}`;if(!t)return r;let a=new URL(r);return Object.entries(t).forEach(([e,t])=>{null!=t&&a.searchParams.append(e,String(t))}),a.toString()}(e,i),u={"Content-Type":"application/json",...n};try{let e=window.localStorage.getItem("authToken");e&&!u.Authorization&&(u={...u,Authorization:`Bearer ${e}`})}catch{}let c={method:s,headers:u,signal:o};if(null!=l&&"GET"!==s)if(l instanceof FormData){let{"Content-Type":e,...t}=u;c.headers=u=t,c.body=l}else c.body=JSON.stringify(l);let m=await fetch(d,c),h=await m.text(),g=null;if(h)try{g=JSON.parse(h)}catch{g=h}if(!m.ok)throw new t(m.statusText||"Request failed",m.status,g);return g}function a(e,t){return r(e,{...t,method:"GET"})}function s(e,t,a){return r(e,{...a,method:"POST",body:t})}e.s(["ApiError",()=>t,"get",()=>a,"post",()=>s])},77952,e=>{"use strict";var t=e.i(43476);let r={primary:"bg-gradient-to-r from-[#2563EB] to-[#4F46E5] text-white shadow-md hover:shadow-lg hover:brightness-110",secondary:"bg-white text-[#0F172A] border border-[#E2E8F0] hover:bg-[#F1F5F9] hover:border-[#CBD5E1]",danger:"bg-[#EF4444] text-white hover:bg-[#DC2626] shadow-sm",outline:"bg-transparent text-[#0F172A] border border-[#E2E8F0] hover:bg-[#F8FAFC] hover:border-[#CBD5E1]",ghost:"bg-transparent text-[#0F172A] hover:bg-[#F1F5F9]"},a={sm:"px-3 py-1.5 text-xs md:text-sm",md:"px-4 py-2 text-sm md:text-base",lg:"px-6 py-3 text-base md:text-lg"};function s({variant:e="primary",size:s="md",children:i,disabled:l,className:n="",...o}){return(0,t.jsx)("button",{className:`inline-flex items-center justify-center gap-2 rounded-full font-semibold transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[#2563EB] focus-visible:ring-offset-[#F8FAFC] ${r[e]} ${a[s]} ${n}`,disabled:l,...o,children:i})}e.s(["Button",()=>s])},71089,e=>{"use strict";var t=e.i(43476),r=e.i(71645);let a=(0,e.i(75254).default)("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);function s({label:e,description:s,accept:i,multiple:l,required:n,valueText:o,onFilesSelected:d}){let[u,c]=(0,r.useState)(!1),m=(0,r.useRef)(null),h=(0,r.useCallback)(e=>{d&&d(e)},[d]),g=!!(o&&o.length>0);return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-[#0F172A]",children:e}),(0,t.jsxs)("div",{onClick:()=>m.current?.click(),onDrop:e=>{e.preventDefault(),e.stopPropagation(),c(!1);let t=e.dataTransfer.files;t&&t.length>0&&h(t)},onDragOver:e=>{e.preventDefault(),e.stopPropagation(),u||c(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),u&&c(!1)},className:`flex flex-col items-center justify-center w-full px-4 py-5 border-2 border-dashed rounded-lg cursor-pointer transition-colors ${u?"border-[#2563EB] bg-[#EFF6FF]":"border-[#E2E8F0] bg-white hover:border-[#CBD5E1] hover:bg-[#F8FAFC]"}`,children:[(0,t.jsx)(a,{className:"w-6 h-6 text-[#2563EB] mb-2"}),(0,t.jsx)("p",{className:"text-sm font-medium text-[#0F172A] text-center",children:"Drag & drop yoki faylni tanlang"}),(0,t.jsx)("p",{className:"mt-1 text-xs text-[#64748B] text-center",children:s??(l?"Fayllarni bu yerga tortib tashlang yoki tanlang":"Faylni bu yerga tortib tashlang yoki tanlang")}),g&&(0,t.jsxs)("p",{className:"mt-2 text-xs text-[#0F172A] max-w-full truncate",children:["Tanlangan: ",o]})]}),(0,t.jsx)("input",{ref:m,type:"file",className:"hidden",accept:i,multiple:l,required:n,onChange:e=>{h(e.target.files)}})]})}e.s(["FileDropzone",()=>s],71089)},38873,e=>{"use strict";var t=e.i(43476),r=e.i(77952),a=e.i(71089),s=e.i(72161),i=e.i(71645);function l(){let[e,l]=(0,i.useState)(""),[n,o]=(0,i.useState)(""),[d,u]=(0,i.useState)(""),[c,m]=(0,i.useState)(""),[h,g]=(0,i.useState)(null),[p,x]=(0,i.useState)(null),[b,f]=(0,i.useState)(null),[v,y]=(0,i.useState)(null),[j,F]=(0,i.useState)(!1),[w,E]=(0,i.useState)(null);return(0,i.useEffect)(()=>{if(!h)return void f(null);let e=URL.createObjectURL(h);return f(e),()=>{URL.revokeObjectURL(e)}},[h]),(0,i.useEffect)(()=>{if(!p)return void y(null);let e=URL.createObjectURL(p);return y(e),()=>{URL.revokeObjectURL(e)}},[p]),(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-[#0F172A]",children:"Yoqilg'i kiritish"}),(0,t.jsx)("p",{className:"text-[#64748B] mt-1",children:"Har safar yoqilg'i quyganda summani va chek suratini kiriting"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 card-shadow max-w-xl",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-[#0F172A] mb-4",children:"Yangi yoqilg'i hodisasi"}),(0,t.jsxs)("form",{className:"space-y-4",onSubmit:async t=>{if(t.preventDefault(),E(null),!e||!d||!h||!p)return void alert("Iltimos, summa, yurgan masofa, yoqilg'i datchigi va speedometr suratlarini kiriting");try{F(!0);let t=new FormData;t.append("files",h),t.append("files",p);let r=(await (0,s.post)("/uploads/images",t,{params:{category:"FUEL"}})).urls??[],a=r[0],i=r[1];await (0,s.post)("/driver/fuel-records",{amount:Number(e)||0,distanceKm:Number(d)||0,dateTime:new Date().toISOString(),fuelGaugePhotoName:a,speedometerPhotoName:i}),alert("Yangi yoqilg'i hodisasi saqlandi"),l(""),u(""),o(""),m(""),g(null),x(null)}catch(e){e instanceof s.ApiError?E(e.data&&e.data.message||e.message||"Yoqilg'i hodisasini saqlashda xatolik yuz berdi"):E("Yoqilg'i hodisasini saqlashda xatolik yuz berdi. Iltimos, qayta urinib ko'ring.")}finally{F(!1)}},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-[#0F172A] mb-2",children:"Yoqilg'i summasi (so'm)"}),(0,t.jsx)("input",{type:"number",value:e,onChange:e=>l(e.target.value),placeholder:"0",className:"w-full px-4 py-2 border border-[#E2E8F0] rounded-lg",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-[#0F172A] mb-2",children:"Yurgan masofa (km)"}),(0,t.jsx)("input",{type:"number",value:d,onChange:e=>u(e.target.value),placeholder:"0",className:"w-full px-4 py-2 border border-[#E2E8F0] rounded-lg",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(a.FileDropzone,{label:"Yoqilg'i datchigi surati",accept:"image/*",required:!0,valueText:n,onFilesSelected:e=>{let t=e?.[0];g(t??null),o(t?t.name:"")}}),b&&(0,t.jsx)("div",{className:"mt-2 flex justify-start",children:(0,t.jsx)("img",{src:b,alt:"Yoqilg'i datchigi surati",className:"w-40 h-40 object-cover rounded-lg border border-[#E2E8F0]"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(a.FileDropzone,{label:"Speedometr surati",accept:"image/*",required:!0,valueText:c,onFilesSelected:e=>{let t=e?.[0];x(t??null),m(t?t.name:"")}}),v&&(0,t.jsx)("div",{className:"mt-2 flex justify-start",children:(0,t.jsx)("img",{src:v,alt:"Speedometr surati",className:"w-40 h-40 object-cover rounded-lg border border-[#E2E8F0]"})})]}),w&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:w}),(0,t.jsx)(r.Button,{type:"submit",variant:"primary",className:"w-full",disabled:j,children:"Yoqilg'ini yuborish"})]})]})]})}e.s(["default",()=>l])}]);